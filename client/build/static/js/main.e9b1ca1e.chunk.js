(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports={foodList:"food-list_foodList__1reRd",foodListItems:"food-list_foodListItems__Vom0L",foodListItem:"food-list_foodListItem__2AAim",foodListFields:"food-list_foodListFields__1drop",headers:"food-list_headers__1zgGb",green:"food-list_green__3Ei-_"}},,,function(e,t,a){e.exports={baseForm:"base-form_baseForm__fFcGB",baseButtons:"base-form_baseButtons__edZZ8",success:"base-form_success__2KhND",error:"base-form_error__3jyA1"}},,,,function(e,t,a){e.exports={foodRow:"food-input_foodRow__3FaJC",foodLabel:"food-input_foodLabel__36i1a",short:"food-input_short__DWUPW",above:"food-input_above__3tFye",foodInput:"food-input_foodInput__3PEmn"}},function(e,t,a){e.exports={foodFormModal:"food-form_foodFormModal__1i0xW",foodFormModalOverlay:"food-form_foodFormModalOverlay__1g29t",foodFormContainer:"food-form_foodFormContainer__3VGNq",foodForm:"food-form_foodForm__2gEtH",foodButtons:"food-form_foodButtons__2Aahn"}},,,function(e,t,a){e.exports={baseInputRow:"base-input_baseInputRow__11po3",baseLabel:"base-input_baseLabel__2FYvB",above:"base-input_above__MO3Bh",baseInput:"base-input_baseInput__ABmzd"}},,,,function(e,t,a){e.exports={foodTag:"food-tag_foodTag__2pFO_",used:"food-tag_used__1-LlO"}},,,function(e,t,a){e.exports={nav:"nav_nav__3AJrQ"}},,,,function(e,t,a){e.exports={foodTags:"food-tags_foodTags__38xGE"}},function(e,t,a){e.exports={foodError:"food-error_foodError__2Xmmv"}},function(e,t,a){e.exports={foodSuccess:"food-success_foodSuccess__3NQQX"}},function(e,t,a){e.exports={foodItemOverlay:"food-item-overlay_foodItemOverlay__20Ma9"}},function(e,t,a){e.exports={showFoodFormButton:"show-food-form-button_showFoodFormButton__1oBC3"}},,function(e,t,a){e.exports={app:"app_app__Ohz0O"}},,,,,,function(e,t,a){},,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(30),c=a.n(o),s=(a(44),a(4)),u=a.n(s),i=a(6),d=a(2),l=a(12),b=a(3),j=a(14),f=a(5),m=a(31),O=Object(m.a)({showAddFoodForm:!1,addFoodFormFetched:!1,addFoodFormDisabled:!1,addFoodFormEditable:!1,addFoodFormError:"",addFoodFormSuccess:"",addFoodFormFoods:[],addFoodFormSelectedFood:"",addFoodFormData:{},showAddFoodFormItemOverlay:-1,userFormData:{},userFormSuccess:"",userFormError:"",userFormInputDisabled:!1,userFormDisabled:!1,loggedIn:!1,isAdmin:!1,currentUser:{}}).useGlobalState,p=a(0);function h(){var e=O("addFoodFormDisabled"),t=Object(d.a)(e,1)[0];return Object(p.jsx)("input",{type:"submit",value:"Submit",disabled:t})}function x(){var e=O("addFoodFormSelectedFood"),t=Object(d.a)(e,2)[1],a=O("showAddFoodForm"),r=Object(d.a)(a,2)[1],n=O("addFoodFormDisabled"),o=Object(d.a)(n,2)[1];return Object(p.jsx)("button",{onClick:function(){t(""),r(!1),o(!0)},children:"Cancel"})}var g=a(17),v=a.n(g);function F(e){var t=e.name,a=e.label,r=e.type,n=e.value,o=e.handleInputChange,c=e.disabled;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("label",{className:"".concat(v.a.foodRow," ").concat("checkbox"===r&&v.a.short),children:[Object(p.jsx)("span",{className:"".concat(v.a.foodLabel," ").concat(("text"===r||"number"===r)&&v.a.above),children:a}),Object(p.jsx)("input",{className:"".concat(v.a.foodInput),name:t,type:r,value:n,checked:n,onChange:o,placeholder:"".concat(a," cannot be ").concat("number"===r?"zero":"blank"),disabled:c})]})})}var _=a(39),y=a(25),k=a.n(y);function E(e){var t=e.tag,a=Object(r.useState)(!1),n=Object(d.a)(a,2),o=n[0],c=n[1],s=O("addFoodFormData"),u=Object(d.a)(s,2),i=u[0],l=u[1],b=O("addFoodFormEditable"),j=Object(d.a)(b,1)[0];Object(r.useEffect)((function(){if(j)for(var e=0;e<i.tags.length;e+=1)i.tags[e]===t&&c(!0)}),[i,j,t,c]);return Object(p.jsx)("span",{className:"".concat(k.a.foodTag," ").concat(o&&k.a.used),onClick:function(){var e=Object(_.a)(i.tags);o?(e=e.filter((function(e){return e!==t})),c(!1)):(e.push(t),c(!0)),l(Object(f.a)(Object(f.a)({},i),{},{tags:e}))},children:t})}var w=a(32),S=a.n(w),I=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r,n,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/cache/".concat(t));case 2:if((a=e.sent).ok){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,a.json();case 7:if((r=e.sent).success){e.next=10;break}return e.abrupt("return",!1);case 10:if(localStorage.getItem(t)){e.next=12;break}return e.abrupt("return",!1);case 12:return n=new Date(r.data.lastUpdated),o=JSON.parse(localStorage.getItem(t)).lastUpdated,c=new Date(o),e.abrupt("return",n<c);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function N(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)([]),c=Object(d.a)(o,2),s=c[0],l=c[1],b=O("addFoodFormError"),j=Object(d.a)(b,1)[0],f=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a,r,o,c,s,i,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("tags");case 2:if(!e.sent){e.next=8;break}if(!localStorage.getItem("tags")){e.next=8;break}return t=JSON.parse(localStorage.getItem("tags")),l(t.data),e.abrupt("return",n(!0));case 8:return e.next=10,fetch("/api/tag/all");case 10:if((a=e.sent).ok){e.next=14;break}return r=a.status,o=a.statusText,e.abrupt("return",j("".concat(r," error: ").concat(o,". Please try again later.")));case 14:return e.next=16,a.json();case 16:c=e.sent,s=c.success,i=c.data,s?(d={data:i,lastUpdated:Date.now()},localStorage.setItem("tags",JSON.stringify(d)),l(i),n(!0)):(j("Error: ".concat(i,". Please try again later.")),n(!1));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){a||f()}));var m=null===s||void 0===s?void 0:s.map((function(e,t){var a=e.tag;return Object(p.jsx)(E,{tag:a},"Tag_".concat(t))}));return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("section",{className:S.a.foodTags,children:m})})}var T={name:"Name",gluten:"Gluten",glutenExplanation:"Gluten Explanation",fructose:"Fructose",fructoseExplanation:"Fructose Explanation",lactose:"Lactose",lactoseExplanation:"Lactose Explanation",price:"Price",baseHunger:"Base Hunger",baseHealth:"Base Health",breakfast:"Breakfast",lunch:"Lunch",dinner:"Dinner",tags:"Tags"},D={name:"",gluten:1,glutenExplanation:"",fructose:!1,fructoseExplanation:"",lactose:!1,lactoseExplanation:"",price:1,baseHunger:1,baseHealth:1,breakfast:!1,lunch:!1,dinner:!1,tags:[]},L=a(18),C=a.n(L);function P(){var e,t,a=O("addFoodFormFetched"),n=Object(d.a)(a,2)[1],o=O("addFoodFormDisabled"),c=Object(d.a)(o,2)[1],s=O("showAddFoodForm"),l=Object(d.a)(s,2)[1],b=O("addFoodFormError"),m=Object(d.a)(b,2)[1],g=O("addFoodFormSuccess"),v=Object(d.a)(g,2)[1],_=O("addFoodFormEditable"),y=Object(d.a)(_,1)[0],k=O("addFoodFormData"),E=Object(d.a)(k,2),w=E[0],S=E[1],I=O("addFoodFormSelectedFood"),L=Object(d.a)(I,2),P=L[0],A=L[1],B=Object(r.useCallback)((function(){S(D)}),[S]);Object(r.useEffect)((function(){y||B()}),[B,y]);Object(r.useEffect)((function(){!function(){for(var e=R.filter((function(e){return null!==e})),t=0;t<e.length;t+=1){var a=e[t].props,r=a.type,n=a.value;if("checkbox"!==r&&!n)return c(!0)}c(!1)}()}));var J=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r,o,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c(!0),y){e.next=8;break}return e.next=5,fetch("/api/food/one",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,fetch("/api/food/one/".concat(P),{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});case 10:a=e.sent;case 11:if(a.ok){e.next=14;break}return o=(r=a).status,s=r.statusText,e.abrupt("return",m("".concat(o," error: ").concat(s,". Please try again later.")));case 14:return e.next=16,a.json();case 16:if(!(i=e.sent).success){e.next=25;break}return B(),n(!1),l(!1),A(""),e.abrupt("return",v("Success: ".concat(i.data.name," was edited.")));case 25:return c(!1),e.abrupt("return",m("Error: ".concat(i.error,". Please try again later.")));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=e.target.value;"checkbox"===e.target.type?t=e.target.checked:"number"===e.target.type&&(t=parseInt(e.target.value)),S(Object(f.a)(Object(f.a)({},w),{},Object(j.a)({},e.target.name,t)))},R=null===(e=Object.entries(w))||void 0===e||null===(t=e.filter((function(e){var t=Object(d.a)(e,1)[0];return!/_/.test(t)})))||void 0===t?void 0:t.map((function(e,t){var a=Object(d.a)(e,2),r=a[0],n=a[1],o="text";return"boolean"===typeof n?o="checkbox":"number"===typeof n&&(o="number"),("glutenExplanation"!==r||w.gluten)&&("fructoseExplanation"!==r||w.fructose)&&("lactoseExplanation"!==r||w.lactose)?Object(p.jsx)(F,{name:r,label:T[r],type:o,value:w[r],handleInputChange:U,disabled:"tags"===r},"Food Input ".concat(t)):null}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:C.a.foodFormModalOverlay}),Object(p.jsx)("article",{className:C.a.foodFormModal,children:Object(p.jsxs)("div",{className:C.a.foodFormContainer,children:[Object(p.jsx)("h2",{children:y?"Edit a dish":"Add a dish"}),Object(p.jsxs)("form",{className:C.a.foodForm,onSubmit:J,children:[R,Object(p.jsx)(N,{}),Object(p.jsxs)("section",{className:C.a.foodButtons,children:[Object(p.jsx)(h,{}),Object(p.jsx)(x,{})]})]})]})})]})}var A=a(33),B=a.n(A);function J(){var e=O("addFoodFormError"),t=Object(d.a)(e,1)[0];return Object(p.jsx)("span",{className:B.a.foodError,children:t})}var U=a(34),R=a.n(U);function M(){var e=O("addFoodFormSuccess"),t=Object(d.a)(e,1)[0];return Object(p.jsx)("span",{className:R.a.foodSuccess,children:t})}var G=a(10),H=a.n(G);function z(){var e,t,a=null===(e=Object.values(T))||void 0===e||null===(t=e.filter((function(e){return!/Explanation/.test(e)})))||void 0===t?void 0:t.map((function(e,t){return Object(p.jsx)("span",{className:"".concat(H.a.foodListFields," ").concat(H.a.headers),children:e},"Header_".concat(t))}));return Object(p.jsx)("section",{className:H.a.foodListItem,children:a})}var W=a(35),q=a.n(W);function Q(e){var t=e._id,a=O("addFoodFormError"),r=Object(d.a)(a,2)[1],n=O("addFoodFormData"),o=Object(d.a)(n,2)[1],c=O("addFoodFormEditable"),s=Object(d.a)(c,2)[1],l=O("showAddFoodForm"),b=Object(d.a)(l,2)[1],j=O("addFoodFormFetched"),f=Object(d.a)(j,2)[1],m=O("addFoodFormSuccess"),h=Object(d.a)(m,2)[1],x=O("addFoodFormSelectedFood"),g=Object(d.a)(x,2)[1],v=function(){var e=Object(i.a)(u.a.mark((function e(){var a,n,c,i,l,j,f,m,O,p,h,x,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/one/".concat(t));case 2:if((a=e.sent).ok){e.next=6;break}return n=a.status,c=a.statusText,e.abrupt("return",r("".concat(n," error: ").concat(c,". Please try again later.")));case 6:return e.next=8,a.json();case 8:if(i=e.sent,l=i.success,j=i.data,l){for(m=null===(f=Object.entries(j))||void 0===f?void 0:f.filter((function(e){var t=Object(d.a)(e,1)[0];return!/_/.test(t)})),O=Object.assign({},D),p=0;p<m.length;p+=1)h=Object(d.a)(m[p],2),x=h[0],v=h[1],O[x]=v;g(t),o(O),s(!0),b(!0)}else r("Error: ".concat(j,". Please try again later."));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(u.a.mark((function e(){var a,n,o,c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/one/".concat(t),{method:"DELETE"});case 2:if((a=e.sent).ok){e.next=6;break}return n=a.status,o=a.statusText,e.abrupt("return",r("".concat(n," error: ").concat(o,". Please try again later.")));case 6:return e.next=8,a.json();case 8:c=e.sent,s=c.success,i=c.data,s?(f(!1),h("Success: ".concat(i.name," was deleted."))):r("Error: ".concat(i,". Please try again later."));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("section",{className:q.a.foodItemOverlay,children:[Object(p.jsx)("button",{onClick:v,children:"Edit"}),Object(p.jsx)("button",{onClick:F,children:"Delete"})]})}function V(e){var t,a,r=e.food,n=e.index,o=r._id,c=O("showAddFoodFormItemOverlay"),s=Object(d.a)(c,2),u=s[0],i=s[1],l=null===(t=Object.entries(r))||void 0===t||null===(a=t.filter((function(e){var t=Object(d.a)(e,1)[0];return!/Explanation|_/.test(t)})))||void 0===a?void 0:a.map((function(e,t){var a=Object(d.a)(e,2),r=(a[0],a[1]),n=r;return"string"===typeof r&&r.length>32&&(n=r.slice(0,29)+"..."),Object(p.jsx)("span",{className:"".concat(H.a.foodListFields," ").concat(!0===r&&H.a.green),children:"string"===typeof r?n:JSON.stringify(r)},"Value_".concat(t))}));return Object(p.jsxs)("article",{onClick:function(){return i(u===n?-1:n)},className:H.a.foodListItem,children:[l,u===n&&Object(p.jsx)(Q,{_id:o})]})}function X(){var e=O("addFoodFormFoods"),t=Object(d.a)(e,1)[0],a=null===t||void 0===t?void 0:t.map((function(e,t){return Object(p.jsx)(V,{food:e,index:t},"Item_".concat(t))}));return Object(p.jsx)("section",{className:H.a.foodListItems,children:a})}function Y(){return Object(p.jsx)("span",{children:"Please wait, loading..."})}function Z(){var e=O("addFoodFormFoods"),t=Object(d.a)(e,2)[1],a=O("addFoodFormFetched"),n=Object(d.a)(a,2),o=n[0],c=n[1],s=O("addFoodFormError"),l=Object(d.a)(s,2),b=l[0],j=l[1],f=O("addFoodFormSuccess"),m=Object(d.a)(f,2),h=m[0],x=m[1],g=function(){var e=Object(i.a)(u.a.mark((function e(){var a,r,n,o,s,i,d,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("foods");case 2:if(!e.sent){e.next=8;break}if(!localStorage.getItem("foods")){e.next=8;break}return a=JSON.parse(localStorage.getItem("foods")),t(a.data),e.abrupt("return",c(!0));case 8:return e.next=10,fetch("/api/food/all");case 10:if((r=e.sent).ok){e.next=14;break}return n=r.status,o=r.statusText,e.abrupt("return",j("".concat(n," error: ").concat(o,". Please try again later.")));case 14:return e.next=16,r.json();case 16:s=e.sent,i=s.success,d=s.data,i?(l={data:d,lastUpdated:Date.now()},localStorage.setItem("foods",JSON.stringify(l)),t(d),c(!0)):(j("Error: ".concat(d,". Please try again later.")),c(!1));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o||g()})),Object(r.useEffect)((function(){h&&setTimeout((function(){return x("")}),3e3),b&&setTimeout((function(){return j("")}),5e3)})),Object(p.jsxs)("article",{className:H.a.foodList,children:[Object(p.jsx)("h2",{children:"Submitted Dishes"}),Object(p.jsx)(z,{}),o?Object(p.jsx)(X,{}):Object(p.jsx)(Y,{}),b&&Object(p.jsx)(J,{}),h&&Object(p.jsx)(M,{})]})}var K=a(36),$=a.n(K);function ee(){var e=O("showAddFoodForm"),t=Object(d.a)(e,2),a=t[0],r=t[1],n=O("addFoodFormEditable"),o=Object(d.a)(n,2)[1],c=O("showAddFoodFormItemOverlay"),s=Object(d.a)(c,2)[1];return Object(p.jsx)("button",{className:$.a.showFoodFormButton,onClick:function(){o(!1),r(!0),s(-1)},disabled:a,children:"Add a dish"})}var te=function(){var e=O("showAddFoodForm"),t=Object(d.a)(e,1)[0];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Z,{}),!t&&Object(p.jsx)(ee,{}),t&&Object(p.jsx)(P,{})]})};function ae(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"My Celiac Adventure"}),Object(p.jsx)("h3",{children:"Welcome!"})]})}function re(){var e=O("currentUser"),t=Object(d.a)(e,1)[0];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"My Celiac Adventure"}),Object(p.jsxs)("h3",{children:["Welcome ",t.username,"!"]})]})}function ne(){var e=O("loggedIn"),t=Object(d.a)(e,1)[0];return Object(p.jsx)(p.Fragment,{children:t?Object(p.jsx)(re,{}):Object(p.jsx)(ae,{})})}function oe(){var e=Object(b.h)().pathname;return Object(p.jsx)(p.Fragment,{children:/login/.test(e)?Object(p.jsx)(l.b,{to:"/register",children:"Register Instead"}):Object(p.jsx)(l.b,{to:"/login",children:"Login Instead"})})}var ce=a(21),se=a.n(ce);function ue(e){var t=e.label,a=e.name,r=e.type,n=e.value,o=e.handleInputChange,c=O("userFormInputDisabled"),s=Object(d.a)(c,1)[0];return Object(p.jsxs)("label",{className:se.a.baseInputRow,children:[Object(p.jsx)("span",{className:"".concat(se.a.baseLabel," ").concat(se.a.above),children:t}),Object(p.jsx)("input",{className:se.a.baseInput,name:a,type:r,value:n,placeholder:"".concat(t," cannot be ").concat("number"===r?"zero":"blank"),onChange:o,disabled:s})]})}function ie(){var e=Object(b.h)().pathname,t=O("userFormDisabled"),a=Object(d.a)(t,1)[0];return Object(p.jsx)("input",{type:"submit",value:/login/.test(e)?"Login":"Register",disabled:a})}var de={username:"Username",email:"Email",password:"Password"},le={username:"",password:""},be={username:"",email:"",password:""},je=a(13),fe=a.n(je);function me(e){var t,a=e.handleFormSubmit,n=O("userFormDisabled"),o=Object(d.a)(n,2)[1],c=O("userFormData"),s=Object(d.a)(c,2),u=s[0],i=s[1];Object(r.useEffect)((function(){!function(){for(var e=b.filter((function(e){return null!==e})),t=0;t<e.length;t+=1){var a=e[t].props,r=a.type,n=a.value;if("checkbox"!==r&&!n)return o(!0)}o(!1)}()}));var l=function(e){var t=e.target.value;"checkbox"===e.target.type?t=e.target.checked:"number"===e.target.type&&(t=parseInt(e.target.value)),i(Object(f.a)(Object(f.a)({},u),{},Object(j.a)({},e.target.name,t)))},b=null===(t=Object.entries(u))||void 0===t?void 0:t.map((function(e,t){var a=Object(d.a)(e,1)[0],r="text";return"email"!==a&&"password"!==a||(r=a),Object(p.jsx)(ue,{name:a,label:de[a],type:r,value:u[a],handleInputChange:l},"Base Input ".concat(t))}));return Object(p.jsxs)("form",{className:fe.a.baseForm,onSubmit:a,children:[b,Object(p.jsxs)("section",{className:fe.a.baseButtons,children:[Object(p.jsx)(ie,{}),Object(p.jsx)(oe,{})]})]})}var Oe=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/auth",{method:"GET",credentials:"include"});case 3:if((t=e.sent).ok){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,t.json();case 8:if((a=e.sent).success){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",a);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/auth-admin",{method:"GET",credentials:"include"});case 3:if((t=e.sent).ok){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,t.json();case 8:if((a=e.sent).success){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",a);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();function he(e){var t,a,n=e.adminRequired,o=O("userFormData"),c=Object(d.a)(o,2),s=c[0],l=c[1],j=O("userFormError"),f=Object(d.a)(j,2),m=f[0],h=f[1],x=O("userFormSuccess"),g=Object(d.a)(x,2),v=g[0],F=g[1],_=O("userFormDisabled"),y=Object(d.a)(_,2)[1],k=O("userFormInputDisabled"),E=Object(d.a)(k,2)[1],w=O("loggedIn"),S=Object(d.a)(w,2),I=S[0],N=S[1],T=O("currentUser"),D=Object(d.a)(T,2)[1],L=O("isAdmin"),C=Object(d.a)(L,2)[1],P=Object(b.g)(),A=Object(b.h)(),B=Object(r.useState)(!1),J=Object(d.a)(B,2),U=J[0],R=J[1],M=Object(r.useCallback)((function(){l(le),y(!1),E(!1),h(""),F("")}),[l,y,E,h,F]);Object(r.useEffect)((function(){v&&setTimeout((function(){return F("")}),3e3),m&&setTimeout((function(){return h("")}),5e3)})),Object(r.useEffect)((function(){U||(M(),R(!0))}),[R,U,M]);var G=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),y(!0),E(!0),e.next=5,fetch("/api/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 5:if(401!==(a=e.sent).status){e.next=9;break}return M(),e.abrupt("return",h("Username or password is invalid."));case 9:if(a.ok){e.next=13;break}return r=a.status,o=a.statusText,M(),e.abrupt("return",h("".concat(r," error: ").concat(o,". Please try again later.")));case 13:return e.next=15,a.json();case 15:if((c=e.sent).success){e.next=19;break}return M(),e.abrupt("return",h("Error: ".concat(c.error,". Please try again later.")));case 19:if(!n){e.next=29;break}return e.next=22,pe();case 22:if(e.sent){e.next=28;break}return C(!1),N(!1),M(),e.abrupt("return",h("Error: you are not an administrator."));case 28:C(!0);case 29:return N(!0),D(c.data),M(),F("Success: logged in. Automatically redirecting."),e.abrupt("return",setTimeout((function(){var e,t;return P.push((null===A||void 0===A||null===(e=A.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/")}),1e3));case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return I?Object(p.jsx)(b.a,{to:(null===A||void 0===A||null===(t=A.state)||void 0===t||null===(a=t.from)||void 0===a?void 0:a.pathname)||"/"}):Object(p.jsxs)(p.Fragment,{children:[U&&Object(p.jsx)(me,{formType:"login",handleFormSubmit:G}),v&&Object(p.jsx)("span",{className:fe.a.success,children:v}),m&&Object(p.jsx)("span",{className:fe.a.error,children:m})]})}function xe(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Login"}),Object(p.jsx)("h3",{children:"Please login to view this page."}),Object(p.jsx)(he,{})]})}function ge(){var e=O("userFormData"),t=Object(d.a)(e,2),a=t[0],n=t[1],o=O("userFormError"),c=Object(d.a)(o,2),s=c[0],l=c[1],j=O("userFormSuccess"),f=Object(d.a)(j,2),m=f[0],h=f[1],x=O("userFormDisabled"),g=Object(d.a)(x,2)[1],v=O("userFormInputDisabled"),F=Object(d.a)(v,2)[1],_=O("loggedIn"),y=Object(d.a)(_,2)[1],k=O("currentUser"),E=Object(d.a)(k,2)[1],w=Object(b.g)(),S=Object(b.h)(),I=Object(r.useState)(!1),N=Object(d.a)(I,2),T=N[0],D=N[1],L=Object(r.useCallback)((function(){n(be),g(!1),F(!1),l(""),h("")}),[n,g,F,l,h]);Object(r.useEffect)((function(){m&&setTimeout((function(){return h("")}),3e3),s&&setTimeout((function(){return l("")}),5e3)})),Object(r.useEffect)((function(){T||(L(),D(!0))}),[D,T,L]);var C=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,n,o,c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),g(!0),F(!0),e.next=5,fetch("/api/register",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:if(201!==!(o=e.sent).status){e.next=10;break}return c=o.status,s=o.message,L(),e.abrupt("return",l("".concat(c," error: ").concat(s,".")));case 10:return e.next=12,o.json();case 12:if((i=e.sent).success){e.next=16;break}return L(),e.abrupt("return",l("Error: ".concat(i.error,". Please try again later.")));case 16:return y(!0),E(i.data),L(),h("Successfully registered user ".concat(i.data.username)),e.abrupt("return",w.push((null===S||void 0===S||null===(r=S.state)||void 0===r||null===(n=r.from)||void 0===n?void 0:n.pathname)||"/"));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[T&&Object(p.jsx)(me,{formType:"register",handleFormSubmit:C}),m&&Object(p.jsx)("span",{className:fe.a.success,children:m}),s&&Object(p.jsx)("span",{className:fe.a.error,children:s})]})}function ve(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Register"}),Object(p.jsx)("h3",{children:"Create a new account to get started."}),Object(p.jsx)(ge,{})]})}var Fe=a(16);function _e(e){var t=e.location,a=Object(Fe.a)(e,["location"]),r=O("loggedIn"),n=Object(d.a)(r,1)[0],o=O("isAdmin"),c=Object(d.a)(o,1)[0];return Object(p.jsx)(p.Fragment,{children:n&&c?Object(p.jsx)(b.b,Object(f.a)({},a)):Object(p.jsx)(b.a,{to:{pathname:"/admin-login",state:{from:t}}})})}function ye(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Admin Login"}),Object(p.jsx)("h3",{children:"You must be an administrator to view this page."}),Object(p.jsx)(he,{adminRequired:!0})]})}function ke(e){var t=e.location,a=Object(Fe.a)(e,["location"]),r=O("loggedIn"),n=Object(d.a)(r,1)[0];return Object(p.jsx)(p.Fragment,{children:n?Object(p.jsx)(b.a,{to:{pathname:"/",state:{from:t}}}):Object(p.jsx)(b.b,Object(f.a)({},a))})}function Ee(e){var t=e.location,a=Object(Fe.a)(e,["location"]),r=O("loggedIn"),n=Object(d.a)(r,1)[0];return Object(p.jsx)(p.Fragment,{children:n?Object(p.jsx)(b.b,Object(f.a)({},a)):Object(p.jsx)(b.a,{to:{pathname:"/login",state:{from:t}}})})}function we(){var e=O("currentUser"),t=Object(d.a)(e,1)[0],a=t.username,r=t.email;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("article",{children:[Object(p.jsx)("p",{children:a}),Object(p.jsx)("p",{children:r})]})})}function Se(){return Object(p.jsx)(we,{})}function Ie(){var e=O("loggedIn"),t=Object(d.a)(e,2),a=t[0],r=t[1],n=O("currentUser"),o=Object(d.a)(n,2),c=o[0],s=o[1],l=Object(b.g)(),j=function(){var e=Object(i.a)(u.a.mark((function e(){var t,n,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/api/logout",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 4:if((t=e.sent).ok){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,t.json();case 9:if(n=e.sent){e.next=12;break}return e.abrupt("return");case 12:if(o=n.success,i=n.message,o){e.next=16;break}return console.log(i),e.abrupt("return");case 16:return localStorage.clear(),s({}),r(!1),e.abrupt("return",l.push("/"));case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("button",{onClick:j,children:"Logout"})}var Ne=a(28),Te=a.n(Ne);function De(){var e=O("loggedIn");return Object(d.a)(e,1)[0]?Object(p.jsxs)("nav",{className:Te.a.nav,children:[Object(p.jsx)(l.b,{to:"/",children:"Play"}),Object(p.jsx)(l.b,{to:"/profile",children:"Profile"}),Object(p.jsx)(Ie,{})]}):Object(p.jsxs)("nav",{className:Te.a.nav,children:[Object(p.jsx)(l.b,{to:"/",children:"Play"}),Object(p.jsx)(l.b,{to:"/register",children:"Register"}),Object(p.jsx)(l.b,{to:"/login",children:"Login"})]})}var Le=a(38),Ce=a.n(Le);function Pe(){var e=O("loggedIn"),t=Object(d.a)(e,2),a=t[0],n=t[1],o=O("isAdmin"),c=Object(d.a)(o,2)[1],s=O("currentUser"),j=Object(d.a)(s,2)[1],f=Object(r.useState)(!1),m=Object(d.a)(f,2),h=m[0],x=m[1];return Object(r.useEffect)((function(){(function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe();case 2:return(t=e.sent).success&&(n(!0),j(t.data)),e.next=6,pe();case 6:e.sent.success&&c(!0),x(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,n,j,c]),Object(p.jsx)("div",{className:Ce.a.app,children:h&&Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(l.a,{children:[Object(p.jsx)(De,{}),Object(p.jsxs)(b.d,{children:[Object(p.jsx)(_e,{path:"/add-food",component:te}),Object(p.jsx)(b.b,{path:"/admin-login",component:ye}),Object(p.jsx)(ke,{path:"/login",component:xe}),Object(p.jsx)(ke,{path:"/register",component:ve}),Object(p.jsx)(Ee,{path:"/profile",component:Se}),Object(p.jsx)(b.b,{path:"/",component:ne})]})]})})})}var Ae=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,53)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),o(e),c(e)}))};c.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(Pe,{})}),document.getElementById("root")),Ae()}],[[52,1,2]]]);
//# sourceMappingURL=main.e9b1ca1e.chunk.js.map