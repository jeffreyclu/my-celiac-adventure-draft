(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports={foodList:"food-list_foodList__1reRd",foodListItems:"food-list_foodListItems__Vom0L",foodListItem:"food-list_foodListItem__2AAim",foodListFields:"food-list_foodListFields__1drop",headers:"food-list_headers__1zgGb",green:"food-list_green__3Ei-_"}},,,function(e,t,a){e.exports={baseForm:"base-form_baseForm__fFcGB",baseButtons:"base-form_baseButtons__edZZ8",success:"base-form_success__2KhND",error:"base-form_error__3jyA1"}},,,,function(e,t,a){e.exports={foodRow:"food-input_foodRow__3FaJC",foodLabel:"food-input_foodLabel__36i1a",short:"food-input_short__DWUPW",above:"food-input_above__3tFye",foodInput:"food-input_foodInput__3PEmn"}},function(e,t,a){e.exports={foodFormModal:"food-form_foodFormModal__1i0xW",foodFormModalOverlay:"food-form_foodFormModalOverlay__1g29t",foodFormContainer:"food-form_foodFormContainer__3VGNq",foodForm:"food-form_foodForm__2gEtH",foodButtons:"food-form_foodButtons__2Aahn"}},,,function(e,t,a){e.exports={baseInputRow:"base-input_baseInputRow__11po3",baseLabel:"base-input_baseLabel__2FYvB",above:"base-input_above__MO3Bh",baseInput:"base-input_baseInput__ABmzd"}},,function(e,t,a){e.exports={game:"game_game__30O23",part:"game_part__2NSY4"}},,,function(e,t,a){e.exports={foodTag:"food-tag_foodTag__2pFO_",used:"food-tag_used__1-LlO"}},,,function(e,t,a){e.exports={nav:"nav_nav__3AJrQ"}},,,,function(e,t,a){e.exports={foodTags:"food-tags_foodTags__38xGE"}},function(e,t,a){e.exports={foodError:"food-error_foodError__2Xmmv"}},function(e,t,a){e.exports={foodSuccess:"food-success_foodSuccess__3NQQX"}},function(e,t,a){e.exports={foodItemOverlay:"food-item-overlay_foodItemOverlay__20Ma9"}},function(e,t,a){e.exports={showFoodFormButton:"show-food-form-button_showFoodFormButton__1oBC3"}},,function(e,t,a){e.exports={app:"app_app__Ohz0O"}},,,,,,function(e,t,a){},,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),c=a(31),o=a.n(c),s=(a(45),a(5)),u=a.n(s),i=a(6),d=a(1),l=a(12),b=a(3),j=a(14),f=a(4),h=a(32),m=Object(h.a)({showAddFoodForm:!1,addFoodFormFetched:!1,addFoodFormDisabled:!1,addFoodFormEditable:!1,addFoodFormError:"",addFoodFormSuccess:"",addFoodFormFoods:[],addFoodFormSelectedFood:"",addFoodFormData:{},showAddFoodFormItemOverlay:-1,userFormData:{},userFormSuccess:"",userFormError:"",userFormInputDisabled:!1,userFormDisabled:!1,loggedIn:!1,isAdmin:!1,currentUser:{},gameState:{},gameHistory:[],gameMode:"",gameTimer:0}).useGlobalState,O=a(0);function p(){var e=m("addFoodFormDisabled"),t=Object(d.a)(e,1)[0];return Object(O.jsx)("input",{type:"submit",value:"Submit",disabled:t})}function x(){var e=m("addFoodFormSelectedFood"),t=Object(d.a)(e,2)[1],a=m("showAddFoodForm"),r=Object(d.a)(a,2)[1],n=m("addFoodFormDisabled"),c=Object(d.a)(n,2)[1];return Object(O.jsx)("button",{onClick:function(){t(""),r(!1),c(!0)},children:"Cancel"})}var g=a(17),v=a.n(g);function F(e){var t=e.name,a=e.label,r=e.type,n=e.value,c=e.handleInputChange,o=e.disabled;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("label",{className:"".concat(v.a.foodRow," ").concat("checkbox"===r&&v.a.short),children:[Object(O.jsx)("span",{className:"".concat(v.a.foodLabel," ").concat(("text"===r||"number"===r)&&v.a.above),children:a}),Object(O.jsx)("input",{className:"".concat(v.a.foodInput),name:t,type:r,value:n,checked:n,onChange:c,placeholder:"".concat(a," cannot be ").concat("number"===r?"zero":"blank"),disabled:o})]})})}var _=a(40),y=a(26),k=a.n(y);function E(e){var t=e.tag,a=Object(r.useState)(!1),n=Object(d.a)(a,2),c=n[0],o=n[1],s=m("addFoodFormData"),u=Object(d.a)(s,2),i=u[0],l=u[1],b=m("addFoodFormEditable"),j=Object(d.a)(b,1)[0];Object(r.useEffect)((function(){if(j)for(var e=0;e<i.tags.length;e+=1)i.tags[e]===t&&o(!0)}),[i,j,t,o]);return Object(O.jsx)("span",{className:"".concat(k.a.foodTag," ").concat(c&&k.a.used),onClick:function(){var e=Object(_.a)(i.tags);c?(e=e.filter((function(e){return e!==t})),o(!1)):(e.push(t),o(!0)),l(Object(f.a)(Object(f.a)({},i),{},{tags:e}))},children:t})}var w=a(33),S=a.n(w),I=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r,n,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/cache/".concat(t));case 2:if((a=e.sent).ok){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,a.json();case 7:if((r=e.sent).success){e.next=10;break}return e.abrupt("return",!1);case 10:if(localStorage.getItem(t)){e.next=12;break}return e.abrupt("return",!1);case 12:return n=new Date(r.data.lastUpdated),c=JSON.parse(localStorage.getItem(t)).lastUpdated,o=new Date(c),e.abrupt("return",n<o);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function N(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)([]),o=Object(d.a)(c,2),s=o[0],l=o[1],b=m("addFoodFormError"),j=Object(d.a)(b,1)[0],f=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a,r,c,o,s,i,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("tags");case 2:if(!e.sent){e.next=8;break}if(!localStorage.getItem("tags")){e.next=8;break}return t=JSON.parse(localStorage.getItem("tags")),l(t.data),e.abrupt("return",n(!0));case 8:return e.next=10,fetch("/api/tag/all");case 10:if((a=e.sent).ok){e.next=14;break}return r=a.status,c=a.statusText,e.abrupt("return",j("".concat(r," error: ").concat(c,". Please try again later.")));case 14:return e.next=16,a.json();case 16:o=e.sent,s=o.success,i=o.data,s?(d={data:i,lastUpdated:Date.now()},localStorage.setItem("tags",JSON.stringify(d)),l(i),n(!0)):(j("Error: ".concat(i,". Please try again later.")),n(!1));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){a||f()}));var h=null===s||void 0===s?void 0:s.map((function(e,t){var a=e.tag;return Object(O.jsx)(E,{tag:a},"Tag_".concat(t))}));return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("section",{className:S.a.foodTags,children:h})})}var C={name:"Name",gluten:"Gluten",glutenExplanation:"Gluten Explanation",fructose:"Fructose",fructoseExplanation:"Fructose Explanation",lactose:"Lactose",lactoseExplanation:"Lactose Explanation",price:"Price",baseHunger:"Base Hunger",breakfast:"Breakfast",lunch:"Lunch",dinner:"Dinner",tags:"Tags"},D={name:"",gluten:1,glutenExplanation:"",fructose:!1,fructoseExplanation:"",lactose:!1,lactoseExplanation:"",price:1,baseHunger:1,breakfast:!1,lunch:!1,dinner:!1,tags:[]},T=a(18),P=a.n(T);function L(){var e,t,a=m("addFoodFormFetched"),n=Object(d.a)(a,2)[1],c=m("addFoodFormDisabled"),o=Object(d.a)(c,2)[1],s=m("showAddFoodForm"),l=Object(d.a)(s,2)[1],b=m("addFoodFormError"),h=Object(d.a)(b,2)[1],g=m("addFoodFormSuccess"),v=Object(d.a)(g,2)[1],_=m("addFoodFormEditable"),y=Object(d.a)(_,1)[0],k=m("addFoodFormData"),E=Object(d.a)(k,2),w=E[0],S=E[1],I=m("addFoodFormSelectedFood"),T=Object(d.a)(I,2),L=T[0],M=T[1],A=Object(r.useCallback)((function(){S(D)}),[S]);Object(r.useEffect)((function(){y||A()}),[A,y]);Object(r.useEffect)((function(){!function(){for(var e=H.filter((function(e){return null!==e})),t=0;t<e.length;t+=1){var a=e[t].props,r=a.type,n=a.value;if("checkbox"!==r&&!n)return o(!0)}o(!1)}()}));var B=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r,c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o(!0),y){e.next=8;break}return e.next=5,fetch("/api/food/one",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,fetch("/api/food/one/".concat(L),{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});case 10:a=e.sent;case 11:if(a.ok){e.next=14;break}return c=(r=a).status,s=r.statusText,e.abrupt("return",h("".concat(c," error: ").concat(s,". Please try again later.")));case 14:return e.next=16,a.json();case 16:if(!(i=e.sent).success){e.next=25;break}return A(),n(!1),l(!1),M(""),e.abrupt("return",v("Success: ".concat(i.data.name," was edited.")));case 25:return o(!1),e.abrupt("return",h("Error: ".concat(i.error,". Please try again later.")));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){var t=e.target.value;"checkbox"===e.target.type?t=e.target.checked:"number"===e.target.type&&(t=parseInt(e.target.value)),S(Object(f.a)(Object(f.a)({},w),{},Object(j.a)({},e.target.name,t)))},H=null===(e=Object.entries(w))||void 0===e||null===(t=e.filter((function(e){var t=Object(d.a)(e,1)[0];return!/_/.test(t)})))||void 0===t?void 0:t.map((function(e,t){var a=Object(d.a)(e,2),r=a[0],n=a[1],c="text";return"boolean"===typeof n?c="checkbox":"number"===typeof n&&(c="number"),("glutenExplanation"!==r||w.gluten)&&("fructoseExplanation"!==r||w.fructose)&&("lactoseExplanation"!==r||w.lactose)?Object(O.jsx)(F,{name:r,label:C[r],type:c,value:w[r],handleInputChange:Y,disabled:"tags"===r},"Food Input ".concat(t)):null}));return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:P.a.foodFormModalOverlay}),Object(O.jsx)("article",{className:P.a.foodFormModal,children:Object(O.jsxs)("div",{className:P.a.foodFormContainer,children:[Object(O.jsx)("h2",{children:y?"Edit a dish":"Add a dish"}),Object(O.jsxs)("form",{className:P.a.foodForm,onSubmit:B,children:[H,Object(O.jsx)(N,{}),Object(O.jsxs)("section",{className:P.a.foodButtons,children:[Object(O.jsx)(p,{}),Object(O.jsx)(x,{})]})]})]})})]})}var M=a(34),A=a.n(M);function B(){var e=m("addFoodFormError"),t=Object(d.a)(e,1)[0];return Object(O.jsx)("span",{className:A.a.foodError,children:t})}var Y=a(35),H=a.n(Y);function J(){var e=m("addFoodFormSuccess"),t=Object(d.a)(e,1)[0];return Object(O.jsx)("span",{className:H.a.foodSuccess,children:t})}var U=a(10),R=a.n(U);function G(){var e,t,a=null===(e=Object.values(C))||void 0===e||null===(t=e.filter((function(e){return!/Explanation/.test(e)})))||void 0===t?void 0:t.map((function(e,t){return Object(O.jsx)("span",{className:"".concat(R.a.foodListFields," ").concat(R.a.headers),children:e},"Header_".concat(t))}));return Object(O.jsx)("section",{className:R.a.foodListItem,children:a})}var K=a(36),z=a.n(K);function W(e){var t=e._id,a=m("addFoodFormError"),r=Object(d.a)(a,2)[1],n=m("addFoodFormData"),c=Object(d.a)(n,2)[1],o=m("addFoodFormEditable"),s=Object(d.a)(o,2)[1],l=m("showAddFoodForm"),b=Object(d.a)(l,2)[1],j=m("addFoodFormFetched"),f=Object(d.a)(j,2)[1],h=m("addFoodFormSuccess"),p=Object(d.a)(h,2)[1],x=m("addFoodFormSelectedFood"),g=Object(d.a)(x,2)[1],v=function(){var e=Object(i.a)(u.a.mark((function e(){var a,n,o,i,l,j,f,h,m,O,p,x,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/one/".concat(t));case 2:if((a=e.sent).ok){e.next=6;break}return n=a.status,o=a.statusText,e.abrupt("return",r("".concat(n," error: ").concat(o,". Please try again later.")));case 6:return e.next=8,a.json();case 8:if(i=e.sent,l=i.success,j=i.data,l){for(h=null===(f=Object.entries(j))||void 0===f?void 0:f.filter((function(e){var t=Object(d.a)(e,1)[0];return!/_/.test(t)})),m=Object.assign({},D),O=0;O<h.length;O+=1)p=Object(d.a)(h[O],2),x=p[0],v=p[1],m[x]=v;g(t),c(m),s(!0),b(!0)}else r("Error: ".concat(j,". Please try again later."));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(u.a.mark((function e(){var a,n,c,o,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/one/".concat(t),{method:"DELETE"});case 2:if((a=e.sent).ok){e.next=6;break}return n=a.status,c=a.statusText,e.abrupt("return",r("".concat(n," error: ").concat(c,". Please try again later.")));case 6:return e.next=8,a.json();case 8:o=e.sent,s=o.success,i=o.data,s?(f(!1),p("Success: ".concat(i.name," was deleted."))):r("Error: ".concat(i,". Please try again later."));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("section",{className:z.a.foodItemOverlay,children:[Object(O.jsx)("button",{onClick:v,children:"Edit"}),Object(O.jsx)("button",{onClick:F,children:"Delete"})]})}function q(e){var t,a,r=e.food,n=e.index,c=r._id,o=m("showAddFoodFormItemOverlay"),s=Object(d.a)(o,2),u=s[0],i=s[1],l=null===(t=Object.entries(r))||void 0===t||null===(a=t.filter((function(e){var t=Object(d.a)(e,1)[0];return!/Explanation|_/.test(t)})))||void 0===a?void 0:a.map((function(e,t){var a=Object(d.a)(e,2),r=(a[0],a[1]),n=r;return"string"===typeof r&&r.length>32&&(n=r.slice(0,29)+"..."),Object(O.jsx)("span",{className:"".concat(R.a.foodListFields," ").concat(!0===r&&R.a.green),children:"string"===typeof r?n:JSON.stringify(r)},"Value_".concat(t))}));return Object(O.jsxs)("article",{onClick:function(){return i(u===n?-1:n)},className:R.a.foodListItem,children:[l,u===n&&Object(O.jsx)(W,{_id:c})]})}function Q(){var e=m("addFoodFormFoods"),t=Object(d.a)(e,1)[0],a=null===t||void 0===t?void 0:t.map((function(e,t){return Object(O.jsx)(q,{food:e,index:t},"Item_".concat(t))}));return Object(O.jsx)("section",{className:R.a.foodListItems,children:a})}function V(){return Object(O.jsx)("span",{children:"Please wait, loading..."})}function X(){var e=m("addFoodFormFoods"),t=Object(d.a)(e,2)[1],a=m("addFoodFormFetched"),n=Object(d.a)(a,2),c=n[0],o=n[1],s=m("addFoodFormError"),l=Object(d.a)(s,2),b=l[0],j=l[1],f=m("addFoodFormSuccess"),h=Object(d.a)(f,2),p=h[0],x=h[1],g=function(){var e=Object(i.a)(u.a.mark((function e(){var a,r,n,c,s,i,d,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("foods");case 2:if(!e.sent){e.next=8;break}if(!localStorage.getItem("foods")){e.next=8;break}return a=JSON.parse(localStorage.getItem("foods")),t(a.data),e.abrupt("return",o(!0));case 8:return e.next=10,fetch("/api/food/all");case 10:if((r=e.sent).ok){e.next=14;break}return n=r.status,c=r.statusText,e.abrupt("return",j("".concat(n," error: ").concat(c,". Please try again later.")));case 14:return e.next=16,r.json();case 16:s=e.sent,i=s.success,d=s.data,i?(l={data:d,lastUpdated:Date.now()},localStorage.setItem("foods",JSON.stringify(l)),t(d),o(!0)):(j("Error: ".concat(d,". Please try again later.")),o(!1));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){c||g()})),Object(r.useEffect)((function(){p&&setTimeout((function(){return x("")}),3e3),b&&setTimeout((function(){return j("")}),5e3)})),Object(O.jsxs)("article",{className:R.a.foodList,children:[Object(O.jsx)("h2",{children:"Submitted Dishes"}),Object(O.jsx)(G,{}),c?Object(O.jsx)(Q,{}):Object(O.jsx)(V,{}),b&&Object(O.jsx)(B,{}),p&&Object(O.jsx)(J,{})]})}var Z=a(37),$=a.n(Z);function ee(){var e=m("showAddFoodForm"),t=Object(d.a)(e,2),a=t[0],r=t[1],n=m("addFoodFormEditable"),c=Object(d.a)(n,2)[1],o=m("showAddFoodFormItemOverlay"),s=Object(d.a)(o,2)[1];return Object(O.jsx)("button",{className:$.a.showFoodFormButton,onClick:function(){c(!1),r(!0),s(-1)},disabled:a,children:"Add a dish"})}var te=function(){var e=m("showAddFoodForm"),t=Object(d.a)(e,1)[0];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(X,{}),!t&&Object(O.jsx)(ee,{}),t&&Object(O.jsx)(L,{})]})},ae={easy:"Easy",default:"Default",hard:"Hard",extreme:"Extreme",glutenKits:"Gluten Kits",carePackages:"Care Packages",hunger:"Hunger",health:"Health"},re={Easy:{days:2,glutenKits:3,carePackages:3,hunger:100,health:100,timer:2e4,fructose:!1,lactose:!1,cash:100},Default:{days:3,glutenKits:2,carePackages:2,hunger:90,health:90,timer:15e3,fructose:!0,lactose:!1,cash:100},Hard:{days:5,glutenKits:1,carePackages:1,hunger:80,health:80,timer:1e4,fructose:!0,lactose:!0,cash:200},Extreme:{days:7,glutenKits:1,carePackages:1,hunger:50,health:50,timer:5e3,fructose:!0,lactose:!0,cash:200}},ne={1:"Breakfast",2:"Lunch",3:"Dinner"},ce=a(23),oe=a.n(ce);function se(){var e,t=m("gameState"),a=Object(d.a)(t,2),r=a[0],n=a[1],c=m("gameMode"),o=Object(d.a)(c,1)[0],s=function(e,t){n(Object(f.a)(Object(f.a)({},e),{},{status:t?"win":"lose"}))},u=function(e){var t,a,r=e.currentDay,c=e.currentMeal;return r===e.days&&3===c?s(e,!0):(c<3?(t=c+1,a=r):(t=1,a=r+1),n(Object(f.a)(Object(f.a)({},e),{},{currentMeal:t,currentDay:a})))},i=function(e){var t,a;return(t=0,a=100,Math.floor(Math.random()*(a-t))+t)-e.gluten<=0},l=function(e){var t=function(e){return r.cash-e.price}(e),a=i(e),n=function(e,t){return t?r.health-e.baseHealth:r.health}(e,a),c=function(e,t){return t?r.hunger-e.baseHunger:Math.ceil(r.hunger+e.baseHunger/2)}(e,a),o=Object(f.a)(Object(f.a)({},r),{},{cash:t,health:n,hunger:c});if(n<=0||c<=0)return s(o,!1);u(o)},b=null===r||void 0===r||null===(e=r.meals)||void 0===e?void 0:e.map((function(e,t){return Object(O.jsx)("button",{disabled:r.cash-e.price<0,onClick:function(){return l(e)},children:"$".concat(e.price,": ").concat(e.name)},"Meal ".concat(t))}));return console.log(r.meals),Object(O.jsx)(O.Fragment,{children:r.status?Object(O.jsxs)("p",{children:["You ",r.status]}):Object(O.jsxs)("article",{className:oe.a.game,children:[Object(O.jsxs)("section",{className:oe.a.part,children:[Object(O.jsxs)("h2",{children:["Day ",r.currentDay," of ",r.days]}),Object(O.jsx)("h3",{children:ne[r.currentMeal]}),b,Object(O.jsx)("button",{onClick:function(){var e=function(){var e=re[o].hunger;return r.hunger-Math.ceil(e/(2.5*r.days))}(),t=Object(f.a)(Object(f.a)({},r),{},{hunger:e});if(e<=0)return s(t,!1);u(t)},children:"Skip"})]}),Object(O.jsxs)("section",{className:oe.a.part,children:[Object(O.jsxs)("p",{children:["Your starting health: ",r.health]}),Object(O.jsxs)("p",{children:["Your starting hunger: ",r.hunger]}),Object(O.jsxs)("p",{children:["Your cash: ",r.cash]}),Object(O.jsxs)("p",{children:["You have ",r.glutenKits," gluten kits which will restore 10 health each."]}),Object(O.jsxs)("p",{children:["You have ",r.carePackages," care packages which will restore 10 hunger each."]}),Object(O.jsxs)("p",{children:["Your time per round: ",r.timer]})]})]})})}function ue(){var e=m("gameState"),t=Object(d.a)(e,2),a=t[0],n=t[1],c=m("gameMode"),o=Object(d.a)(c,2),s=o[0],u=o[1],i=Object(r.useState)(!1),l=Object(d.a)(i,2),b=l[0],j=l[1],h=Object(r.useState)(!1),p=Object(d.a)(h,2),x=p[0],g=p[1],v=Object(r.useCallback)((function(){var e=function(e,t){return Math.floor(Math.random()*(t-e))+e},t=function(){var t=re["".concat(s)].days,a=[];console.log(9*t);for(var r=0;r<9*t;r+=1){var n={};n.name="Meal ".concat(r),n.gluten=e(10,100),n.glutenExplanation="Cause it sucks :(",n.baseHealth=e(5,20),n.baseHunger=e(5,20),n.price=e(5,25),n.breakfast=r%3===0,n.lunch=r%3===1,n.dinner=r%3===3,n.fructose=1===e(1,2),n.lactose=2===e(1,2),a.push(n)}return a}(),a=Object(f.a)({},re["".concat(s)]);a.meals=t,a.currentDay=1,a.currentMeal=1,a.status="",n(a),j(!0)}),[s,n]);Object(r.useEffect)((function(){s&&!b&&v()}),[s,v,b]);var F=function(e){u(ae[e.target.innerText.toLowerCase()])};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"My Celiac Adventure"}),Object(O.jsx)("h3",{children:"Welcome!"}),!s&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("p",{children:"Select a game mode:"}),Object(O.jsx)("button",{onClick:F,children:"Easy"}),Object(O.jsx)("button",{onClick:F,children:"Default"}),Object(O.jsx)("button",{onClick:F,children:"Hard"}),Object(O.jsx)("button",{onClick:F,children:"Extreme"})]}),s&&b&&!x&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("p",{children:["You selected ",s," mode:"]}),Object(O.jsxs)("p",{children:["You must survive for ",a.days," days by buying and eating food. Keep your health and hunger above 0!"]}),Object(O.jsxs)("p",{children:["Your starting health: ",a.health]}),Object(O.jsxs)("p",{children:["Your starting hunger: ",a.hunger]}),Object(O.jsxs)("p",{children:["Your cash: ",a.cash]}),Object(O.jsxs)("p",{children:["You have ",a.glutenKits," gluten kits which will restore 10 health each."]}),Object(O.jsxs)("p",{children:["You have ",a.carePackages," care packages which will restore 10 hunger each."]}),Object(O.jsxs)("p",{children:["Your time per round: ",a.timer]}),Object(O.jsx)("button",{onClick:function(){return g(!0)},children:"Start game"}),Object(O.jsx)("button",{onClick:function(e){u(""),n(""),j("")},children:"Choose a different mode"})]}),x&&Object(O.jsx)(se,{})]})}function ie(){var e=m("currentUser"),t=Object(d.a)(e,1)[0];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"My Celiac Adventure"}),Object(O.jsxs)("h3",{children:["Welcome ",t.username,"!"]})]})}function de(){var e=m("loggedIn"),t=Object(d.a)(e,1)[0];return Object(O.jsx)(O.Fragment,{children:t?Object(O.jsx)(ie,{}):Object(O.jsx)(ue,{})})}function le(){var e=Object(b.h)().pathname;return Object(O.jsx)(O.Fragment,{children:/login/.test(e)?Object(O.jsx)(l.b,{to:"/register",children:"Register Instead"}):Object(O.jsx)(l.b,{to:"/login",children:"Login Instead"})})}var be=a(21),je=a.n(be);function fe(e){var t=e.label,a=e.name,r=e.type,n=e.value,c=e.handleInputChange,o=m("userFormInputDisabled"),s=Object(d.a)(o,1)[0];return Object(O.jsxs)("label",{className:je.a.baseInputRow,children:[Object(O.jsx)("span",{className:"".concat(je.a.baseLabel," ").concat(je.a.above),children:t}),Object(O.jsx)("input",{className:je.a.baseInput,name:a,type:r,value:n,placeholder:"".concat(t," cannot be ").concat("number"===r?"zero":"blank"),onChange:c,disabled:s})]})}function he(){var e=Object(b.h)().pathname,t=m("userFormDisabled"),a=Object(d.a)(t,1)[0];return Object(O.jsx)("input",{type:"submit",value:/login/.test(e)?"Login":"Register",disabled:a})}var me={username:"Username",email:"Email",password:"Password"},Oe={username:"",password:""},pe={username:"",email:"",password:""},xe=a(13),ge=a.n(xe);function ve(e){var t,a=e.handleFormSubmit,n=m("userFormDisabled"),c=Object(d.a)(n,2)[1],o=m("userFormData"),s=Object(d.a)(o,2),u=s[0],i=s[1];Object(r.useEffect)((function(){!function(){for(var e=b.filter((function(e){return null!==e})),t=0;t<e.length;t+=1){var a=e[t].props,r=a.type,n=a.value;if("checkbox"!==r&&!n)return c(!0)}c(!1)}()}));var l=function(e){var t=e.target.value;"checkbox"===e.target.type?t=e.target.checked:"number"===e.target.type&&(t=parseInt(e.target.value)),i(Object(f.a)(Object(f.a)({},u),{},Object(j.a)({},e.target.name,t)))},b=null===(t=Object.entries(u))||void 0===t?void 0:t.map((function(e,t){var a=Object(d.a)(e,1)[0],r="text";return"email"!==a&&"password"!==a||(r=a),Object(O.jsx)(fe,{name:a,label:me[a],type:r,value:u[a],handleInputChange:l},"Base Input ".concat(t))}));return Object(O.jsxs)("form",{className:ge.a.baseForm,onSubmit:a,children:[b,Object(O.jsxs)("section",{className:ge.a.baseButtons,children:[Object(O.jsx)(he,{}),Object(O.jsx)(le,{})]})]})}var Fe=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/auth",{method:"GET",credentials:"include"});case 3:if((t=e.sent).ok){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,t.json();case 8:if((a=e.sent).success){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",a);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/auth-admin",{method:"GET",credentials:"include"});case 3:if((t=e.sent).ok){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,t.json();case 8:if((a=e.sent).success){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",a);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();function ye(e){var t,a,n=e.adminRequired,c=m("userFormData"),o=Object(d.a)(c,2),s=o[0],l=o[1],j=m("userFormError"),f=Object(d.a)(j,2),h=f[0],p=f[1],x=m("userFormSuccess"),g=Object(d.a)(x,2),v=g[0],F=g[1],_=m("userFormDisabled"),y=Object(d.a)(_,2)[1],k=m("userFormInputDisabled"),E=Object(d.a)(k,2)[1],w=m("loggedIn"),S=Object(d.a)(w,2),I=S[0],N=S[1],C=m("currentUser"),D=Object(d.a)(C,2)[1],T=m("isAdmin"),P=Object(d.a)(T,2)[1],L=Object(b.g)(),M=Object(b.h)(),A=Object(r.useState)(!1),B=Object(d.a)(A,2),Y=B[0],H=B[1],J=Object(r.useCallback)((function(){l(Oe),y(!1),E(!1),p(""),F("")}),[l,y,E,p,F]);Object(r.useEffect)((function(){v&&setTimeout((function(){return F("")}),3e3),h&&setTimeout((function(){return p("")}),5e3)})),Object(r.useEffect)((function(){Y||(J(),H(!0))}),[H,Y,J]);var U=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),y(!0),E(!0),e.next=5,fetch("/api/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 5:if(401!==(a=e.sent).status){e.next=9;break}return J(),e.abrupt("return",p("Username or password is invalid."));case 9:if(a.ok){e.next=13;break}return r=a.status,c=a.statusText,J(),e.abrupt("return",p("".concat(r," error: ").concat(c,". Please try again later.")));case 13:return e.next=15,a.json();case 15:if((o=e.sent).success){e.next=19;break}return J(),e.abrupt("return",p("Error: ".concat(o.error,". Please try again later.")));case 19:if(!n){e.next=29;break}return e.next=22,_e();case 22:if(e.sent){e.next=28;break}return P(!1),N(!1),J(),e.abrupt("return",p("Error: you are not an administrator."));case 28:P(!0);case 29:return N(!0),D(o.data),J(),F("Success: logged in. Automatically redirecting."),e.abrupt("return",setTimeout((function(){var e,t;return L.push((null===M||void 0===M||null===(e=M.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/")}),1e3));case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return I?Object(O.jsx)(b.a,{to:(null===M||void 0===M||null===(t=M.state)||void 0===t||null===(a=t.from)||void 0===a?void 0:a.pathname)||"/"}):Object(O.jsxs)(O.Fragment,{children:[Y&&Object(O.jsx)(ve,{formType:"login",handleFormSubmit:U}),v&&Object(O.jsx)("span",{className:ge.a.success,children:v}),h&&Object(O.jsx)("span",{className:ge.a.error,children:h})]})}function ke(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"Login"}),Object(O.jsx)("h3",{children:"Please login to view this page."}),Object(O.jsx)(ye,{})]})}function Ee(){var e=m("userFormData"),t=Object(d.a)(e,2),a=t[0],n=t[1],c=m("userFormError"),o=Object(d.a)(c,2),s=o[0],l=o[1],j=m("userFormSuccess"),f=Object(d.a)(j,2),h=f[0],p=f[1],x=m("userFormDisabled"),g=Object(d.a)(x,2)[1],v=m("userFormInputDisabled"),F=Object(d.a)(v,2)[1],_=m("loggedIn"),y=Object(d.a)(_,2)[1],k=m("currentUser"),E=Object(d.a)(k,2)[1],w=Object(b.g)(),S=Object(b.h)(),I=Object(r.useState)(!1),N=Object(d.a)(I,2),C=N[0],D=N[1],T=Object(r.useCallback)((function(){n(pe),g(!1),F(!1),l(""),p("")}),[n,g,F,l,p]);Object(r.useEffect)((function(){h&&setTimeout((function(){return p("")}),3e3),s&&setTimeout((function(){return l("")}),5e3)})),Object(r.useEffect)((function(){C||(T(),D(!0))}),[D,C,T]);var P=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,n,c,o,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),g(!0),F(!0),e.next=5,fetch("/api/register",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:if(201!==!(c=e.sent).status){e.next=10;break}return o=c.status,s=c.message,T(),e.abrupt("return",l("".concat(o," error: ").concat(s,".")));case 10:return e.next=12,c.json();case 12:if((i=e.sent).success){e.next=16;break}return T(),e.abrupt("return",l("Error: ".concat(i.error,". Please try again later.")));case 16:return y(!0),E(i.data),T(),p("Successfully registered user ".concat(i.data.username)),e.abrupt("return",w.push((null===S||void 0===S||null===(r=S.state)||void 0===r||null===(n=r.from)||void 0===n?void 0:n.pathname)||"/"));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[C&&Object(O.jsx)(ve,{formType:"register",handleFormSubmit:P}),h&&Object(O.jsx)("span",{className:ge.a.success,children:h}),s&&Object(O.jsx)("span",{className:ge.a.error,children:s})]})}function we(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"Register"}),Object(O.jsx)("h3",{children:"Create a new account to get started."}),Object(O.jsx)(Ee,{})]})}var Se=a(16);function Ie(e){var t=e.location,a=Object(Se.a)(e,["location"]),r=m("loggedIn"),n=Object(d.a)(r,1)[0],c=m("isAdmin"),o=Object(d.a)(c,1)[0];return Object(O.jsx)(O.Fragment,{children:n&&o?Object(O.jsx)(b.b,Object(f.a)({},a)):Object(O.jsx)(b.a,{to:{pathname:"/admin-login",state:{from:t}}})})}function Ne(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"Admin Login"}),Object(O.jsx)("h3",{children:"You must be an administrator to view this page."}),Object(O.jsx)(ye,{adminRequired:!0})]})}function Ce(e){var t=e.location,a=Object(Se.a)(e,["location"]),r=m("loggedIn"),n=Object(d.a)(r,1)[0];return Object(O.jsx)(O.Fragment,{children:n?Object(O.jsx)(b.a,{to:{pathname:"/",state:{from:t}}}):Object(O.jsx)(b.b,Object(f.a)({},a))})}function De(e){var t=e.location,a=Object(Se.a)(e,["location"]),r=m("loggedIn"),n=Object(d.a)(r,1)[0];return Object(O.jsx)(O.Fragment,{children:n?Object(O.jsx)(b.b,Object(f.a)({},a)):Object(O.jsx)(b.a,{to:{pathname:"/login",state:{from:t}}})})}function Te(){var e=m("currentUser"),t=Object(d.a)(e,1)[0],a=t.username,r=t.email;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("article",{children:[Object(O.jsx)("p",{children:a}),Object(O.jsx)("p",{children:r})]})})}function Pe(){return Object(O.jsx)(Te,{})}function Le(){var e=m("loggedIn"),t=Object(d.a)(e,2),a=t[0],r=t[1],n=m("currentUser"),c=Object(d.a)(n,2),o=c[0],s=c[1],l=Object(b.g)(),j=function(){var e=Object(i.a)(u.a.mark((function e(){var t,n,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/api/logout",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 4:if((t=e.sent).ok){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,t.json();case 9:if(n=e.sent){e.next=12;break}return e.abrupt("return");case 12:if(c=n.success,i=n.message,c){e.next=16;break}return console.log(i),e.abrupt("return");case 16:return localStorage.clear(),s({}),r(!1),e.abrupt("return",l.push("/"));case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)("button",{onClick:j,children:"Logout"})}var Me=a(29),Ae=a.n(Me);function Be(){var e=m("loggedIn");return Object(d.a)(e,1)[0]?Object(O.jsxs)("nav",{className:Ae.a.nav,children:[Object(O.jsx)(l.b,{to:"/",children:"Play"}),Object(O.jsx)(l.b,{to:"/profile",children:"Profile"}),Object(O.jsx)(Le,{})]}):Object(O.jsxs)("nav",{className:Ae.a.nav,children:[Object(O.jsx)(l.b,{to:"/",children:"Play"}),Object(O.jsx)(l.b,{to:"/register",children:"Register"}),Object(O.jsx)(l.b,{to:"/login",children:"Login"})]})}var Ye=a(39),He=a.n(Ye);function Je(){var e=m("loggedIn"),t=Object(d.a)(e,2),a=t[0],n=t[1],c=m("isAdmin"),o=Object(d.a)(c,2)[1],s=m("currentUser"),j=Object(d.a)(s,2)[1],f=Object(r.useState)(!1),h=Object(d.a)(f,2),p=h[0],x=h[1];return Object(r.useEffect)((function(){(function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe();case 2:return(t=e.sent).success&&(n(!0),j(t.data)),e.next=6,_e();case 6:e.sent.success&&o(!0),x(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,n,j,o]),Object(O.jsx)("div",{className:He.a.app,children:p&&Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(l.a,{children:[Object(O.jsx)(Be,{}),Object(O.jsxs)(b.d,{children:[Object(O.jsx)(Ie,{path:"/add-food",component:te}),Object(O.jsx)(b.b,{path:"/admin-login",component:Ne}),Object(O.jsx)(Ce,{path:"/login",component:ke}),Object(O.jsx)(Ce,{path:"/register",component:we}),Object(O.jsx)(De,{path:"/profile",component:Pe}),Object(O.jsx)(b.b,{path:"/",component:de})]})]})})})}var Ue=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,54)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),r(e),n(e),c(e),o(e)}))};o.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(Je,{})}),document.getElementById("root")),Ue()}],[[53,1,2]]]);
//# sourceMappingURL=main.df7627c6.chunk.js.map