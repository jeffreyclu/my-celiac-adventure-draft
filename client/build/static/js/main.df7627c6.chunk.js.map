{"version":3,"sources":["components/add-food/list/food-list.module.css","components/user-form/base-form.module.css","components/add-food/form/food-input.module.css","components/add-food/form/food-form.module.css","components/user-form/base-input.module.css","components/game/game.module.css","components/add-food/form/food-tag.module.css","components/nav/nav.module.css","components/add-food/form/food-tags.module.css","components/add-food/list/food-error.module.css","components/add-food/list/food-success.module.css","components/add-food/list/food-item-overlay.module.css","components/add-food/form/show-food-form-button.module.css","pages/app/app.module.css","state.js","components/add-food/form/food-submit.js","components/add-food/form/food-cancel.js","components/add-food/form/food-input.js","components/add-food/form/food-tag.js","utils/index.js","components/add-food/form/food-tags.js","components/add-food/constants.js","components/add-food/form/food-form.js","components/add-food/list/food-error.js","components/add-food/list/food-success.js","components/add-food/list/food-list-headers.js","components/add-food/list/food-item-overlay.js","components/add-food/list/food-list-item.js","components/add-food/list/food-list-items.js","components/add-food/list/food-loading.js","components/add-food/list/food-list.js","components/add-food/form/show-food-form-button.js","pages/add-food/add-food.js","components/game/constants.js","components/game/game-main.js","components/game/free-game-container.js","components/game/game-container.js","pages/game/game.js","components/user-form/base-flip-form.js","components/user-form/base-input.js","components/user-form/base-submit.js","components/user-form/constants.js","components/user-form/base-form.js","components/auth/utils/index.js","components/user-form/login-form.js","pages/login/login.js","components/user-form/register-form.js","pages/register/register.js","components/auth/auth-admin.js","pages/login/admin-login.js","components/auth/un-auth.js","components/auth/auth.js","components/profile/user-details.js","pages/profile/profile.js","components/nav/nav-logout.js","components/nav/nav.js","pages/app/App.js","reportWebVitals.js","index.js"],"names":["module","exports","useGlobalState","createGlobalState","showAddFoodForm","addFoodFormFetched","addFoodFormDisabled","addFoodFormEditable","addFoodFormError","addFoodFormSuccess","addFoodFormFoods","addFoodFormSelectedFood","addFoodFormData","showAddFoodFormItemOverlay","userFormData","userFormSuccess","userFormError","userFormInputDisabled","userFormDisabled","loggedIn","isAdmin","currentUser","gameState","gameHistory","gameMode","gameTimer","FoodSubmit","type","value","disabled","FoodCancel","setAddFoodFormSelectedFood","setShowAddFoodForm","setAddFoodFormDisabled","onClick","FoodInput","name","label","handleInputChange","className","styles","foodRow","short","foodLabel","above","foodInput","checked","onChange","placeholder","FoodTag","tag","useState","used","setUsed","setAddFoodFormData","useEffect","i","length","foodTag","newTags","filter","oldTag","push","tags","checkCache","cacheName","a","fetch","req","ok","json","resp","success","localStorage","getItem","serverLastUpdated","Date","data","lastUpdated","cacheRawLastUpdated","JSON","parse","cacheLastUpdated","FoodTags","fetchedTags","setFetchedTags","formTags","setFormTags","setAddFoodFormError","fetchTags","cachedTags","status","statusText","cache","now","setItem","stringify","tagsList","map","foodTags","addFoodLabels","gluten","glutenExplanation","fructose","fructoseExplanation","lactose","lactoseExplanation","price","baseHunger","breakfast","lunch","dinner","addFoodFormBaseData","FoodForm","setAddFoodFormFetched","setAddFoodFormSuccess","resetFormData","useCallback","activeInputs","foodInputs","input","props","validateForm","handleFormSubmit","e","preventDefault","method","mode","credentials","headers","body","error","target","parseInt","Object","entries","key","test","foodFormModalOverlay","foodFormModal","foodFormContainer","foodForm","onSubmit","foodButtons","FormError","foodError","FoodSuccess","foodSuccess","FoodListHeaders","foodListHeaders","values","header","foodListFields","foodListItem","FoodItemOverlay","_id","setAddFoodFormEditable","handleClickEdit","filtered","mapped","assign","handleClickDelete","foodItemOverlay","FoodListItem","food","index","setShowAddFoodFormItemOverlay","foodFields","formatted","slice","green","FoodListItems","foodListItems","FoodLoading","FoodList","setAddFoodFormFoods","fetchFoods","cachedFoods","setTimeout","foodList","ShowFoodFormButton","showFoodFormButton","AddFood","gameLabels","easy","default","hard","extreme","glutenKits","carePackages","hunger","health","gameModeFactors","Easy","days","timer","cash","Default","Hard","Extreme","gameMeals","1","2","3","GameMain","setGameState","handleGameEnd","newGameState","alive","goToNextRound","newMeal","newDay","currentDay","currentMeal","checkGluten","meal","min","max","Math","floor","random","handleMealSelection","newCash","checkBuyMeal","glutened","newHealth","baseHealth","checkHealth","newHunger","ceil","checkHunger","meals","console","log","game","part","checkSkipMeal","FreeGameContainer","setGameMode","fetched","setFetched","begin","setBegin","fetchMeals","genRandomNumber","tempGame","genTempGame","initialGameState","handleGameModeSelection","innerText","toLowerCase","GameContainer","username","Game","BaseFlipForm","pathname","useLocation","to","BaseInput","baseInputRow","baseLabel","baseInput","BaseSubmit","baseFormLabels","email","password","loginFormBaseData","registerFormBaseData","BaseForm","setUserFormDisabled","setUserFormData","formInputs","baseForm","baseButtons","isAuthorized","isAdminAuthorized","LoginForm","adminRequired","setUserFormError","setUserFormSuccess","setUserFormInputDisabled","setLoggedIn","setCurrentUser","setIsAdmin","history","useHistory","historyState","loaded","setLoaded","handleLogin","state","from","formType","Login","RegisterForm","handleRegister","message","Register","AdminAuthorized","location","AdminLogin","Unauthorized","Authorized","UserDetails","Profile","NavLogout","handleLogout","clear","Nav","nav","App","authStatus","getLoginStatus","app","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.df7627c6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"foodList\":\"food-list_foodList__1reRd\",\"foodListItems\":\"food-list_foodListItems__Vom0L\",\"foodListItem\":\"food-list_foodListItem__2AAim\",\"foodListFields\":\"food-list_foodListFields__1drop\",\"headers\":\"food-list_headers__1zgGb\",\"green\":\"food-list_green__3Ei-_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"baseForm\":\"base-form_baseForm__fFcGB\",\"baseButtons\":\"base-form_baseButtons__edZZ8\",\"success\":\"base-form_success__2KhND\",\"error\":\"base-form_error__3jyA1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"foodRow\":\"food-input_foodRow__3FaJC\",\"foodLabel\":\"food-input_foodLabel__36i1a\",\"short\":\"food-input_short__DWUPW\",\"above\":\"food-input_above__3tFye\",\"foodInput\":\"food-input_foodInput__3PEmn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"foodFormModal\":\"food-form_foodFormModal__1i0xW\",\"foodFormModalOverlay\":\"food-form_foodFormModalOverlay__1g29t\",\"foodFormContainer\":\"food-form_foodFormContainer__3VGNq\",\"foodForm\":\"food-form_foodForm__2gEtH\",\"foodButtons\":\"food-form_foodButtons__2Aahn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"baseInputRow\":\"base-input_baseInputRow__11po3\",\"baseLabel\":\"base-input_baseLabel__2FYvB\",\"above\":\"base-input_above__MO3Bh\",\"baseInput\":\"base-input_baseInput__ABmzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"game\":\"game_game__30O23\",\"part\":\"game_part__2NSY4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"foodTag\":\"food-tag_foodTag__2pFO_\",\"used\":\"food-tag_used__1-LlO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"nav_nav__3AJrQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"foodTags\":\"food-tags_foodTags__38xGE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"foodError\":\"food-error_foodError__2Xmmv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"foodSuccess\":\"food-success_foodSuccess__3NQQX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"foodItemOverlay\":\"food-item-overlay_foodItemOverlay__20Ma9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"showFoodFormButton\":\"show-food-form-button_showFoodFormButton__1oBC3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__Ohz0O\"};","import { createGlobalState } from 'react-hooks-global-state';\n\nconst initialState = {\n  showAddFoodForm: false,\n  addFoodFormFetched: false,\n  addFoodFormDisabled: false,\n  addFoodFormEditable: false,\n  addFoodFormError: '',\n  addFoodFormSuccess: '',\n  addFoodFormFoods: [],\n  addFoodFormSelectedFood: '',\n  addFoodFormData: {},\n  showAddFoodFormItemOverlay: -1,\n  userFormData: {},\n  userFormSuccess: '',\n  userFormError: '',\n  userFormInputDisabled: false,\n  userFormDisabled: false,\n  loggedIn: false,\n  isAdmin: false,\n  currentUser: {},\n  gameState: {},\n  gameHistory: [],\n  gameMode: '',\n  gameTimer: 0,\n};\n\nexport const { useGlobalState } = createGlobalState(initialState);\n","import React from 'react';\n\nimport { useGlobalState } from '../../../state';\n\nexport default function FoodSubmit() {\n  const [addFoodFormDisabled] = useGlobalState('addFoodFormDisabled');\n  return <input type=\"submit\" value=\"Submit\" disabled={addFoodFormDisabled} />;\n}\n","import React from 'react';\n\nimport { useGlobalState } from '../../../state';\n\nexport default function FoodCancel() {\n  const [, setAddFoodFormSelectedFood] = useGlobalState(\n    'addFoodFormSelectedFood',\n  );\n  const [, setShowAddFoodForm] = useGlobalState('showAddFoodForm');\n  const [, setAddFoodFormDisabled] = useGlobalState('addFoodFormDisabled');\n\n  const handleClick = () => {\n    setAddFoodFormSelectedFood('');\n    setShowAddFoodForm(false);\n    setAddFoodFormDisabled(true);\n  };\n\n  return <button onClick={handleClick}>Cancel</button>;\n}\n","import React from 'react';\n\nimport styles from './food-input.module.css';\n\nexport default function FoodInput({\n  name,\n  label,\n  type,\n  value,\n  handleInputChange,\n  disabled,\n}) {\n  return (\n    <>\n      <label\n        className={`${styles.foodRow} ${type === 'checkbox' && styles.short}`}>\n        <span\n          className={`${styles.foodLabel} ${\n            (type === 'text' || type === 'number') && styles.above\n          }`}>\n          {label}\n        </span>\n        <input\n          className={`${styles.foodInput}`}\n          name={name}\n          type={type}\n          value={value}\n          checked={value}\n          onChange={handleInputChange}\n          placeholder={`${label} cannot be ${\n            type === 'number' ? 'zero' : 'blank'\n          }`}\n          disabled={disabled}\n        />\n      </label>\n    </>\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nimport { useGlobalState } from '../../../state';\n\nimport styles from './food-tag.module.css';\n\nexport default function FoodTag({ tag }) {\n  const [used, setUsed] = useState(false);\n  const [addFoodFormData, setAddFoodFormData] =\n    useGlobalState('addFoodFormData');\n  const [addFoodFormEditable] = useGlobalState('addFoodFormEditable');\n\n  // check if current tag is already in the formdata, then set it to used\n  // this is only checked when editing existing an existing dish\n  useEffect(() => {\n    if (addFoodFormEditable) {\n      for (let i = 0; i < addFoodFormData['tags'].length; i += 1) {\n        if (addFoodFormData['tags'][i] === tag) {\n          setUsed(true);\n        }\n      }\n    }\n  }, [addFoodFormData, addFoodFormEditable, tag, setUsed]);\n\n  const handleClick = () => {\n    // copy the existing tags used in the form\n    let newTags = [...addFoodFormData['tags']];\n    if (used) {\n      // if the current tag is used, remove it from the form's tags\n      newTags = newTags.filter((oldTag) => oldTag !== tag);\n      setUsed(false);\n    } else {\n      // otherwise, add it to the form's tags\n      newTags.push(tag);\n      setUsed(true);\n    }\n\n    // update the form data with new tags array\n    setAddFoodFormData({\n      ...addFoodFormData,\n      tags: newTags,\n    });\n  };\n\n  return (\n    <span\n      className={`${styles.foodTag} ${used && styles.used}`}\n      onClick={handleClick}>\n      {tag}\n    </span>\n  );\n}\n","export const checkCache = async (cacheName) => {\n  const req = await fetch(`/api/cache/${cacheName}`);\n  if (!req.ok) {\n    return false;\n  }\n  const resp = await req.json();\n  if (!resp.success) {\n    return false;\n  }\n  // check if localStorage cache exists\n  if (!localStorage.getItem(cacheName)) {\n    return false;\n  }\n  // get cache last updated status from server\n  const serverLastUpdated = new Date(resp.data.lastUpdated);\n  // get local cache last updated status\n  const cacheRawLastUpdated = JSON.parse(\n    localStorage.getItem(cacheName),\n  ).lastUpdated;\n  const cacheLastUpdated = new Date(cacheRawLastUpdated);\n  // if server cache has not been updated since local cache\n  // continue using local cache (i.e. return true)\n  return serverLastUpdated < cacheLastUpdated;\n};\n","import React, { useEffect, useState } from 'react';\n\nimport FoodTag from './food-tag';\nimport { useGlobalState } from '../../../state';\n\nimport styles from './food-tags.module.css';\nimport { checkCache } from '../../../utils';\n\nexport default function FoodTags() {\n  const [fetchedTags, setFetchedTags] = useState(false);\n  const [formTags, setFormTags] = useState([]);\n  const [setAddFoodFormError] = useGlobalState('addFoodFormError');\n\n  const fetchTags = async () => {\n    // check if local cache is still valid\n    const isCacheValid = await checkCache('tags');\n    // check cache\n    if (isCacheValid) {\n      if (localStorage.getItem('tags')) {\n        const cachedTags = JSON.parse(localStorage.getItem('tags'));\n        setFormTags(cachedTags.data);\n        return setFetchedTags(true);\n      }\n    }\n\n    // otherwise make fresh data request\n    const req = await fetch('/api/tag/all');\n    if (!req.ok) {\n      const { status, statusText } = req;\n      return setAddFoodFormError(\n        `${status} error: ${statusText}. Please try again later.`,\n      );\n    }\n    const resp = await req.json();\n    const { success, data } = resp;\n\n    if (success) {\n      // first cache the data\n      const cache = { data, lastUpdated: Date.now() };\n      localStorage.setItem('tags', JSON.stringify(cache));\n      setFormTags(data);\n      setFetchedTags(true);\n    } else {\n      setAddFoodFormError(`Error: ${data}. Please try again later.`);\n      setFetchedTags(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!fetchedTags) {\n      fetchTags();\n    }\n  });\n\n  const tagsList = formTags?.map(({ tag }, i) => {\n    return <FoodTag key={`Tag_${i}`} tag={tag} />;\n  });\n\n  return (\n    <>\n      <section className={styles.foodTags}>{tagsList}</section>\n    </>\n  );\n}\n","export const addFoodLabels = {\n  name: 'Name',\n  gluten: 'Gluten',\n  glutenExplanation: 'Gluten Explanation',\n  fructose: 'Fructose',\n  fructoseExplanation: 'Fructose Explanation',\n  lactose: 'Lactose',\n  lactoseExplanation: 'Lactose Explanation',\n  price: 'Price',\n  baseHunger: 'Base Hunger',\n  breakfast: 'Breakfast',\n  lunch: 'Lunch',\n  dinner: 'Dinner',\n  tags: 'Tags',\n};\n\nexport const addFoodFormBaseData = {\n  name: '',\n  gluten: 1,\n  glutenExplanation: '',\n  fructose: false,\n  fructoseExplanation: '',\n  lactose: false,\n  lactoseExplanation: '',\n  price: 1,\n  baseHunger: 1,\n  breakfast: false,\n  lunch: false,\n  dinner: false,\n  tags: [],\n};\n","import React, { useCallback, useEffect } from 'react';\n\nimport FoodSubmit from './food-submit';\nimport FoodCancel from './food-cancel';\nimport FoodInput from './food-input';\nimport FoodTags from './food-tags';\nimport { addFoodLabels, addFoodFormBaseData } from '../constants';\nimport { useGlobalState } from '../../../state';\n\nimport styles from './food-form.module.css';\n\nexport default function FoodForm() {\n  const [, setAddFoodFormFetched] = useGlobalState('addFoodFormFetched');\n  const [, setAddFoodFormDisabled] = useGlobalState('addFoodFormDisabled');\n  const [, setShowAddFoodForm] = useGlobalState('showAddFoodForm');\n  const [, setAddFoodFormError] = useGlobalState('addFoodFormError');\n  const [, setAddFoodFormSuccess] = useGlobalState('addFoodFormSuccess');\n  const [addFoodFormEditable] = useGlobalState('addFoodFormEditable');\n  const [addFoodFormData, setAddFoodFormData] =\n    useGlobalState('addFoodFormData');\n  const [addFoodFormSelectedFood, setAddFoodFormSelectedFood] = useGlobalState(\n    'addFoodFormSelectedFood',\n  );\n\n  const resetFormData = useCallback(() => {\n    setAddFoodFormData(addFoodFormBaseData);\n  }, [setAddFoodFormData]);\n\n  // generate a blank form if not editing an existing food\n  useEffect(() => {\n    if (!addFoodFormEditable) {\n      resetFormData();\n    }\n  }, [resetFormData, addFoodFormEditable]);\n\n  const validateForm = () => {\n    // filter out unused inputs\n    const activeInputs = foodInputs.filter((input) => input !== null);\n    for (let i = 0; i < activeInputs.length; i += 1) {\n      const { type, value } = activeInputs[i].props;\n      // ignore checkboxes and check for blanks\n      if (type !== 'checkbox' && !value) {\n        return setAddFoodFormDisabled(true);\n      }\n    }\n    return setAddFoodFormDisabled(false);\n  };\n\n  // validate form on every change\n  useEffect(() => {\n    validateForm();\n  });\n\n  const handleFormSubmit = async (e) => {\n    e.preventDefault();\n    setAddFoodFormDisabled(true);\n    let req;\n    if (!addFoodFormEditable) {\n      // if not editing existing data, send new POST request\n      req = await fetch('/api/food/one', {\n        method: 'POST', // *GET, POST, PUT, DELETE, etc.\n        mode: 'cors', // no-cors, *cors, same-origin\n        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n        credentials: 'same-origin', // include, *same-origin, omit\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(addFoodFormData),\n      });\n    } else {\n      // otherwise, send PUT request\n      req = await fetch(`/api/food/one/${addFoodFormSelectedFood}`, {\n        method: 'PUT', // *GET, POST, PUT, DELETE, etc.\n        mode: 'cors', // no-cors, *cors, same-origin\n        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n        credentials: 'same-origin', // include, *same-origin, omit\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(addFoodFormData),\n      });\n    }\n\n    if (!req.ok) {\n      const { status, statusText } = req;\n      return setAddFoodFormError(\n        `${status} error: ${statusText}. Please try again later.`,\n      );\n    }\n\n    const resp = await req.json();\n\n    if (resp.success) {\n      resetFormData();\n      setAddFoodFormFetched(false);\n      setShowAddFoodForm(false);\n      setAddFoodFormSelectedFood('');\n      return setAddFoodFormSuccess(`Success: ${resp.data.name} was edited.`);\n    } else {\n      setAddFoodFormDisabled(false);\n      return setAddFoodFormError(\n        `Error: ${resp.error}. Please try again later.`,\n      );\n    }\n  };\n\n  const handleInputChange = (e) => {\n    let value = e.target.value;\n    // make sure we are using the right value type\n    if (e.target.type === 'checkbox') {\n      value = e.target.checked;\n    } else if (e.target.type === 'number') {\n      value = parseInt(e.target.value);\n    }\n    setAddFoodFormData({\n      ...addFoodFormData,\n      [e.target.name]: value,\n    });\n  };\n\n  const foodInputs = Object.entries(addFoodFormData)\n    // filter out mongoDB _ keys\n    ?.filter(([key]) => !/_/.test(key))\n    ?.map(([key, value], i) => {\n      // render inputs dynamically based on form data structure\n      let type = 'text';\n      // assign different input type based on input value type\n      if (typeof value === 'boolean') {\n        type = 'checkbox';\n      } else if (typeof value === 'number') {\n        type = 'number';\n      }\n      // hide explanation inputs if not applicable\n      if (key === 'glutenExplanation' && !addFoodFormData['gluten']) {\n        return null;\n      }\n      if (key === 'fructoseExplanation' && !addFoodFormData['fructose']) {\n        return null;\n      }\n      if (key === 'lactoseExplanation' && !addFoodFormData['lactose']) {\n        return null;\n      }\n      return (\n        <FoodInput\n          key={`Food Input ${i}`}\n          name={key}\n          label={addFoodLabels[key]}\n          type={type}\n          value={addFoodFormData[key]}\n          handleInputChange={handleInputChange}\n          disabled={key === 'tags'}\n        />\n      );\n    });\n\n  return (\n    <>\n      <div className={styles.foodFormModalOverlay} />\n      <article className={styles.foodFormModal}>\n        <div className={styles.foodFormContainer}>\n          <h2>{addFoodFormEditable ? 'Edit a dish' : 'Add a dish'}</h2>\n          <form className={styles.foodForm} onSubmit={handleFormSubmit}>\n            {foodInputs}\n            <FoodTags />\n            <section className={styles.foodButtons}>\n              <FoodSubmit />\n              <FoodCancel />\n            </section>\n          </form>\n        </div>\n      </article>\n    </>\n  );\n}\n","import React from 'react';\n\nimport { useGlobalState } from '../../../state';\n\nimport styles from './food-error.module.css';\n\nexport default function FormError() {\n  const [addFoodFormError] = useGlobalState('addFoodFormError');\n  return <span className={styles.foodError}>{addFoodFormError}</span>;\n}\n","import React from 'react';\n\nimport { useGlobalState } from '../../../state';\n\nimport styles from './food-success.module.css';\n\nexport default function FoodSuccess() {\n  const [addFoodFormSuccess] = useGlobalState('addFoodFormSuccess');\n  return <span className={styles.foodSuccess}>{addFoodFormSuccess}</span>;\n}\n","import React from 'react';\n\nimport { addFoodLabels } from '../constants';\n\nimport styles from './food-list.module.css';\n\nexport default function FoodListHeaders() {\n  const foodListHeaders = Object.values(addFoodLabels)\n    // filter out the explanation fields, no need to show them\n    ?.filter((label) => !/Explanation/.test(label))\n    ?.map((header, i) => (\n      <span\n        className={`${styles.foodListFields} ${styles.headers}`}\n        key={`Header_${i}`}>\n        {header}\n      </span>\n    ));\n  return <section className={styles.foodListItem}>{foodListHeaders}</section>;\n}\n","import React from 'react';\n\nimport { useGlobalState } from '../../../state';\nimport { addFoodFormBaseData } from '../constants';\n\nimport styles from './food-item-overlay.module.css';\n\nexport default function FoodItemOverlay({ _id }) {\n  const [, setAddFoodFormError] = useGlobalState('addFoodFormError');\n  const [, setAddFoodFormData] = useGlobalState('addFoodFormData');\n  const [, setAddFoodFormEditable] = useGlobalState('addFoodFormEditable');\n  const [, setShowAddFoodForm] = useGlobalState('showAddFoodForm');\n  const [, setAddFoodFormFetched] = useGlobalState('addFoodFormFetched');\n  const [, setAddFoodFormSuccess] = useGlobalState('addFoodFormSuccess');\n  const [, setAddFoodFormSelectedFood] = useGlobalState(\n    'addFoodFormSelectedFood',\n  );\n\n  const handleClickEdit = async () => {\n    const req = await fetch(`/api/food/one/${_id}`);\n    if (!req.ok) {\n      const { status, statusText } = req;\n      return setAddFoodFormError(\n        `${status} error: ${statusText}. Please try again later.`,\n      );\n    }\n    const resp = await req.json();\n    const { success, data } = resp;\n    if (success) {\n      // filter out mongoDB _ keys\n      const filtered = Object.entries(data)?.filter(([key]) => !/_/.test(key));\n      // map fetched data to form data shape\n      const mapped = Object.assign({}, addFoodFormBaseData);\n      for (let i = 0; i < filtered.length; i += 1) {\n        const [key, value] = filtered[i];\n        mapped[key] = value;\n      }\n      setAddFoodFormSelectedFood(_id);\n      setAddFoodFormData(mapped);\n      setAddFoodFormEditable(true);\n      setShowAddFoodForm(true);\n    } else {\n      setAddFoodFormError(`Error: ${data}. Please try again later.`);\n    }\n  };\n\n  const handleClickDelete = async () => {\n    const req = await fetch(`/api/food/one/${_id}`, {\n      method: 'DELETE',\n    });\n    if (!req.ok) {\n      const { status, statusText } = req;\n      return setAddFoodFormError(\n        `${status} error: ${statusText}. Please try again later.`,\n      );\n    }\n    const resp = await req.json();\n    const { success, data } = resp;\n    if (success) {\n      setAddFoodFormFetched(false);\n      setAddFoodFormSuccess(`Success: ${data.name} was deleted.`);\n    } else {\n      setAddFoodFormError(`Error: ${data}. Please try again later.`);\n    }\n  };\n\n  return (\n    <section className={styles.foodItemOverlay}>\n      <button onClick={handleClickEdit}>Edit</button>\n      <button onClick={handleClickDelete}>Delete</button>\n    </section>\n  );\n}\n","import React from 'react';\n\nimport FoodItemOverlay from './food-item-overlay';\nimport { useGlobalState } from '../../../state';\n\nimport styles from './food-list.module.css';\n\nexport default function FoodListItem({ food, index }) {\n  const { _id } = food;\n\n  const [showAddFoodFormItemOverlay, setShowAddFoodFormItemOverlay] =\n    useGlobalState('showAddFoodFormItemOverlay');\n\n  const handleShowFoodItemOverlay = () => {\n    if (showAddFoodFormItemOverlay === index) {\n      return setShowAddFoodFormItemOverlay(-1);\n    }\n    return setShowAddFoodFormItemOverlay(index);\n  };\n\n  // filter out unused fields (explanation fields and mongoDB fields)\n  const foodFields = Object.entries(food)\n    ?.filter(([key]) => !/Explanation|_/.test(key))\n    ?.map(([key, value], i) => {\n      let formatted = value;\n      if (typeof value === 'string' && value.length > 32) {\n        formatted = value.slice(0, 29) + `...`;\n      }\n      return (\n        <span\n          key={`Value_${i}`}\n          className={`${styles.foodListFields} ${\n            value === true && styles.green\n          }`}>\n          {typeof value === 'string' ? formatted : JSON.stringify(value)}\n        </span>\n      );\n    });\n\n  return (\n    <article\n      onClick={handleShowFoodItemOverlay}\n      className={styles.foodListItem}>\n      {foodFields}\n      {showAddFoodFormItemOverlay === index && <FoodItemOverlay _id={_id} />}\n    </article>\n  );\n}\n","import React from 'react';\n\nimport FoodListItem from './food-list-item';\nimport { useGlobalState } from '../../../state';\n\nimport styles from './food-list.module.css';\n\nexport default function FoodListItems() {\n  const [addFoodFormFoods] = useGlobalState('addFoodFormFoods');\n  const foodListItems = addFoodFormFoods?.map((food, i) => {\n    return <FoodListItem key={`Item_${i}`} food={food} index={i} />;\n  });\n  return <section className={styles.foodListItems}>{foodListItems}</section>;\n}\n","import React from 'react';\n\nexport default function FoodLoading() {\n  return <span>Please wait, loading...</span>;\n}\n","import React, { useEffect } from 'react';\n\nimport FoodError from './food-error';\nimport FoodSuccess from './food-success';\nimport FoodListHeaders from './food-list-headers';\nimport FoodListItems from './food-list-items';\nimport FoodLoading from './food-loading';\nimport { useGlobalState } from '../../../state';\n\nimport styles from './food-list.module.css';\nimport { checkCache } from '../../../utils';\n\nexport default function FoodList() {\n  const [, setAddFoodFormFoods] = useGlobalState('addFoodFormFoods');\n  const [addFoodFormFetched, setAddFoodFormFetched] =\n    useGlobalState('addFoodFormFetched');\n  const [addFoodFormError, setAddFoodFormError] =\n    useGlobalState('addFoodFormError');\n  const [addFoodFormSuccess, setAddFoodFormSuccess] =\n    useGlobalState('addFoodFormSuccess');\n\n  const fetchFoods = async () => {\n    // check if local cache is still valid\n    const isCacheValid = await checkCache('foods');\n    // check the cache\n    if (isCacheValid) {\n      if (localStorage.getItem('foods')) {\n        const cachedFoods = JSON.parse(localStorage.getItem('foods'));\n        setAddFoodFormFoods(cachedFoods.data);\n        return setAddFoodFormFetched(true);\n      }\n    }\n    // otherwise get fresh data\n    const req = await fetch('/api/food/all');\n    if (!req.ok) {\n      const { status, statusText } = req;\n      return setAddFoodFormError(\n        `${status} error: ${statusText}. Please try again later.`,\n      );\n    }\n    const resp = await req.json();\n    const { success, data } = resp;\n    if (success) {\n      // first cache the data\n      const cache = { data, lastUpdated: Date.now() };\n      localStorage.setItem('foods', JSON.stringify(cache));\n      setAddFoodFormFoods(data);\n      setAddFoodFormFetched(true);\n    } else {\n      setAddFoodFormError(`Error: ${data}. Please try again later.`);\n      setAddFoodFormFetched(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!addFoodFormFetched) {\n      fetchFoods();\n    }\n  });\n\n  useEffect(() => {\n    if (addFoodFormSuccess) {\n      setTimeout(() => setAddFoodFormSuccess(''), 3000);\n    }\n    if (addFoodFormError) {\n      setTimeout(() => setAddFoodFormError(''), 5000);\n    }\n  });\n\n  return (\n    <article className={styles.foodList}>\n      <h2>Submitted Dishes</h2>\n      <FoodListHeaders />\n      {addFoodFormFetched ? <FoodListItems /> : <FoodLoading />}\n      {addFoodFormError && <FoodError />}\n      {addFoodFormSuccess && <FoodSuccess />}\n    </article>\n  );\n}\n","import React from 'react';\n\nimport { useGlobalState } from '../../../state';\n\nimport styles from './show-food-form-button.module.css';\n\nexport default function ShowFoodFormButton() {\n  const [showAddFoodForm, setShowAddFoodForm] =\n    useGlobalState('showAddFoodForm');\n  const [, setAddFoodFormEditable] = useGlobalState('addFoodFormEditable');\n  const [, setShowAddFoodFormItemOverlay] = useGlobalState(\n    'showAddFoodFormItemOverlay',\n  );\n\n  const handleShowFormClick = () => {\n    setAddFoodFormEditable(false);\n    setShowAddFoodForm(true);\n    setShowAddFoodFormItemOverlay(-1);\n  };\n  return (\n    <button\n      className={styles.showFoodFormButton}\n      onClick={handleShowFormClick}\n      disabled={showAddFoodForm}>\n      Add a dish\n    </button>\n  );\n}\n","import React from 'react';\n\nimport FoodForm from '../../components/add-food/form/food-form';\nimport FoodList from '../../components/add-food/list/food-list';\nimport ShowFoodFormButton from '../../components/add-food/form/show-food-form-button';\nimport { useGlobalState } from '../../state';\n\nconst AddFood = () => {\n  const [showAddFoodForm] = useGlobalState('showAddFoodForm');\n  return (\n    <>\n      <FoodList />\n      {!showAddFoodForm && <ShowFoodFormButton />}\n      {showAddFoodForm && <FoodForm />}\n    </>\n  );\n};\n\nexport default AddFood;\n","export const gameLabels = {\n  easy: 'Easy',\n  default: 'Default',\n  hard: 'Hard',\n  extreme: 'Extreme',\n  glutenKits: 'Gluten Kits',\n  carePackages: 'Care Packages',\n  hunger: 'Hunger',\n  health: 'Health',\n};\n\nexport const gameModeFactors = {\n  Easy: {\n    days: 2,\n    glutenKits: 3,\n    carePackages: 3,\n    hunger: 100,\n    health: 100,\n    timer: 20000,\n    fructose: false,\n    lactose: false,\n    cash: 100,\n  },\n  Default: {\n    days: 3,\n    glutenKits: 2,\n    carePackages: 2,\n    hunger: 90,\n    health: 90,\n    timer: 15000,\n    fructose: true,\n    lactose: false,\n    cash: 100,\n  },\n  Hard: {\n    days: 5,\n    glutenKits: 1,\n    carePackages: 1,\n    hunger: 80,\n    health: 80,\n    timer: 10000,\n    fructose: true,\n    lactose: true,\n    cash: 200,\n  },\n  Extreme: {\n    days: 7,\n    glutenKits: 1,\n    carePackages: 1,\n    hunger: 50,\n    health: 50,\n    timer: 5000,\n    fructose: true,\n    lactose: true,\n    cash: 200,\n  },\n};\n\nexport const gameMeals = {\n  1: 'Breakfast',\n  2: 'Lunch',\n  3: 'Dinner',\n};\n","import React from 'react';\nimport { useGlobalState } from '../../state';\nimport { gameMeals, gameModeFactors } from './constants';\n\nimport styles from './game.module.css';\n\nexport default function GameMain() {\n  const [gameState, setGameState] = useGlobalState('gameState');\n  const [gameMode] = useGlobalState('gameMode');\n\n  //random num generator helper function\n  const genRandomNumber = (min, max) =>\n    Math.floor(Math.random() * (max - min)) + min;\n\n  const handleGameEnd = (newGameState, alive) => {\n    setGameState({\n      ...newGameState,\n      status: alive ? 'win' : 'lose',\n    });\n  };\n\n  const goToNextRound = (newGameState) => {\n    const { currentDay, currentMeal, days } = newGameState;\n    if (currentDay === days && currentMeal === 3) {\n      return handleGameEnd(newGameState, true);\n    }\n    let newMeal, newDay;\n    if (currentMeal < 3) {\n      newMeal = currentMeal + 1;\n      newDay = currentDay;\n    } else {\n      newMeal = 1;\n      newDay = currentDay + 1;\n    }\n    return setGameState({\n      ...newGameState,\n      currentMeal: newMeal,\n      currentDay: newDay,\n    });\n  };\n\n  const checkSkipMeal = () => {\n    // when skipping meal, reduce hunger amount by\n    // total number of days in game / no of rounds\n    // round up so player cannot just win by skipping meals\n    let baseHunger = gameModeFactors[gameMode].hunger;\n    return gameState.hunger - Math.ceil(baseHunger / (gameState.days * 2.5));\n  };\n\n  const checkBuyMeal = (meal) => {\n    return gameState.cash - meal.price;\n  };\n\n  const checkGluten = (meal) => {\n    // if luck is 100 and meal.gluten chance is 90\n    // 100 - 90 > 0 so no glutened\n    // but if luck is 80 and meal.gluten chance is 90\n    /// 80 - 90 < 0, so glutened :(\n    const luck = genRandomNumber(0, 100);\n    return luck - meal.gluten <= 0;\n  };\n\n  const checkHealth = (meal, glutened) => {\n    return glutened ? gameState.health - meal.baseHealth : gameState.health;\n  };\n\n  const checkHunger = (meal, glutened) => {\n    return glutened\n      ? gameState.hunger - meal.baseHunger\n      : Math.ceil(gameState.hunger + meal.baseHunger / 2);\n  };\n\n  const handleMealSelection = (meal) => {\n    const newCash = checkBuyMeal(meal);\n    const glutened = checkGluten(meal);\n    const newHealth = checkHealth(meal, glutened);\n    const newHunger = checkHunger(meal, glutened);\n    const newGameState = {\n      ...gameState,\n      cash: newCash,\n      health: newHealth,\n      hunger: newHunger,\n    };\n    if (newHealth <= 0 || newHunger <= 0) {\n      return handleGameEnd(newGameState, false);\n    }\n    goToNextRound(newGameState);\n  };\n\n  const handleSkip = () => {\n    const newHunger = checkSkipMeal();\n    const newGameState = {\n      ...gameState,\n      hunger: newHunger,\n    };\n    if (newHunger <= 0) {\n      return handleGameEnd(newGameState, false);\n    }\n    goToNextRound(newGameState);\n  };\n\n  const meals = gameState?.meals?.map((meal, i) => (\n    <button\n      disabled={gameState.cash - meal.price < 0}\n      key={`Meal ${i}`}\n      onClick={() =>\n        handleMealSelection(meal)\n      }>{`$${meal.price}: ${meal.name}`}</button>\n  ));\n\n  console.log(gameState.meals);\n  return (\n    <>\n      {!gameState.status ? (\n        <article className={styles.game}>\n          <section className={styles.part}>\n            <h2>\n              Day {gameState.currentDay} of {gameState.days}\n            </h2>\n            <h3>{gameMeals[gameState.currentMeal]}</h3>\n            {meals}\n            <button onClick={handleSkip}>Skip</button>\n          </section>\n          <section className={styles.part}>\n            <p>Your starting health: {gameState.health}</p>\n            <p>Your starting hunger: {gameState.hunger}</p>\n            <p>Your cash: {gameState.cash}</p>\n            <p>\n              You have {gameState.glutenKits} gluten kits which will restore 10\n              health each.\n            </p>\n            <p>\n              You have {gameState.carePackages} care packages which will restore\n              10 hunger each.\n            </p>\n            <p>Your time per round: {gameState.timer}</p>\n          </section>\n        </article>\n      ) : (\n        <p>You {gameState.status}</p>\n      )}\n    </>\n  );\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useGlobalState } from '../../state';\nimport { gameLabels, gameModeFactors } from './constants';\nimport GameMain from './game-main';\n\nexport default function FreeGameContainer() {\n  const [gameState, setGameState] = useGlobalState('gameState');\n  const [gameMode, setGameMode] = useGlobalState('gameMode');\n  const [fetched, setFetched] = useState(false);\n  const [begin, setBegin] = useState(false);\n\n  // TODO real fetch meals\n  // const fetchMeals = useCallback(async () => {\n  //   const req = await fetch('/api/food/all');\n  //   if (!req.ok) {\n  //     return; // TODO handle game errors\n  //   }\n  //   const resp = await req.json();\n  //   if (!resp.success) {\n  //     return; // TODO handle game errors\n  //   }\n  //   const initialGameState = { ...gameModeFactors[`${gameMode}`] };\n  //   initialGameState.meals = resp.data;\n  //   initialGameState.currentDay = 1;\n  //   initialGameState.currentMeal = 1;\n  //   initialGameState.status = '';\n  //   setGameState(initialGameState);\n  //   setFetched(true);\n  // }, [setGameState, gameMode]);\n\n  // temp function to gen fake game data\n  const fetchMeals = useCallback(() => {\n    //random num generator helper function\n    const genRandomNumber = (min, max) =>\n      Math.floor(Math.random() * (max - min)) + min;\n\n    const genTempGame = () => {\n      const days = gameModeFactors[`${gameMode}`].days;\n      const tempGame = [];\n      console.log(days * 9);\n      for (let i = 0; i < days * 9; i += 1) {\n        const meal = {};\n        meal.name = `Meal ${i}`;\n        meal.gluten = genRandomNumber(10, 100);\n        meal.glutenExplanation = 'Cause it sucks :(';\n        meal.baseHealth = genRandomNumber(5, 20);\n        meal.baseHunger = genRandomNumber(5, 20);\n        meal.price = genRandomNumber(5, 25);\n        meal.breakfast = i % 3 === 0;\n        meal.lunch = i % 3 === 1;\n        meal.dinner = i % 3 === 3;\n        meal.fructose = genRandomNumber(1, 2) === 1;\n        meal.lactose = genRandomNumber(1, 2) === 2;\n        tempGame.push(meal);\n      }\n      return tempGame;\n    };\n\n    const test = genTempGame();\n\n    const initialGameState = { ...gameModeFactors[`${gameMode}`] };\n    initialGameState.meals = test;\n    initialGameState.currentDay = 1;\n    initialGameState.currentMeal = 1;\n    initialGameState.status = '';\n    setGameState(initialGameState);\n    setFetched(true);\n  }, [gameMode, setGameState]);\n\n  // console.log(gameState);\n\n  useEffect(() => {\n    if (gameMode && !fetched) {\n      fetchMeals();\n    }\n  }, [gameMode, fetchMeals, fetched]);\n\n  const handleGameModeSelection = (e) => {\n    setGameMode(gameLabels[e.target.innerText.toLowerCase()]);\n  };\n\n  const handleGameModeSelectionCancel = (e) => {\n    setGameMode('');\n    setGameState('');\n    setFetched('');\n  };\n\n  return (\n    <>\n      <h2>My Celiac Adventure</h2>\n      <h3>Welcome!</h3>\n      {!gameMode && (\n        <>\n          <p>Select a game mode:</p>\n          <button onClick={handleGameModeSelection}>Easy</button>\n          <button onClick={handleGameModeSelection}>Default</button>\n          <button onClick={handleGameModeSelection}>Hard</button>\n          <button onClick={handleGameModeSelection}>Extreme</button>\n        </>\n      )}\n      {gameMode && fetched && !begin && (\n        <>\n          <p>You selected {gameMode} mode:</p>\n          <p>\n            You must survive for {gameState.days} days by buying and eating\n            food. Keep your health and hunger above 0!\n          </p>\n          <p>Your starting health: {gameState.health}</p>\n          <p>Your starting hunger: {gameState.hunger}</p>\n          <p>Your cash: {gameState.cash}</p>\n          <p>\n            You have {gameState.glutenKits} gluten kits which will restore 10\n            health each.\n          </p>\n          <p>\n            You have {gameState.carePackages} care packages which will restore\n            10 hunger each.\n          </p>\n          <p>Your time per round: {gameState.timer}</p>\n          <button onClick={() => setBegin(true)}>Start game</button>\n          <button onClick={handleGameModeSelectionCancel}>\n            Choose a different mode\n          </button>\n        </>\n      )}\n      {begin && <GameMain />}\n    </>\n  );\n}\n","import React from 'react';\n\nimport { useGlobalState } from '../../state';\n\nexport default function GameContainer() {\n  const [currentUser] = useGlobalState('currentUser');\n  return (\n    <>\n      <h2>My Celiac Adventure</h2>\n      {<h3>Welcome {currentUser.username}!</h3>}\n    </>\n  );\n}\n","import React from 'react';\nimport FreeGameContainer from '../../components/game/free-game-container';\nimport GameContainer from '../../components/game/game-container';\n\nimport { useGlobalState } from '../../state';\n\nexport default function Game() {\n  const [loggedIn] = useGlobalState('loggedIn');\n\n  return <>{loggedIn ? <GameContainer /> : <FreeGameContainer />}</>;\n}\n","import React from 'react';\n\nimport { useLocation, Link } from 'react-router-dom';\n\nexport default function BaseFlipForm() {\n  const { pathname } = useLocation();\n  return (\n    <>\n      {/login/.test(pathname) ? (\n        <Link to=\"/register\">Register Instead</Link>\n      ) : (\n        <Link to=\"/login\">Login Instead</Link>\n      )}\n    </>\n  );\n}\n","import React from 'react';\nimport { useGlobalState } from '../../state';\n\nimport styles from './base-input.module.css';\n\nexport default function BaseInput({\n  label,\n  name,\n  type,\n  value,\n  handleInputChange,\n}) {\n  const [userFormInputDisabled] = useGlobalState('userFormInputDisabled');\n  return (\n    <label className={styles.baseInputRow}>\n      <span className={`${styles.baseLabel} ${styles.above}`}>{label}</span>\n      <input\n        className={styles.baseInput}\n        name={name}\n        type={type}\n        value={value}\n        placeholder={`${label} cannot be ${\n          type === 'number' ? 'zero' : 'blank'\n        }`}\n        onChange={handleInputChange}\n        disabled={userFormInputDisabled}></input>\n    </label>\n  );\n}\n","import React from 'react';\nimport { useLocation } from 'react-router';\n\nimport { useGlobalState } from '../../state';\n\nexport default function BaseSubmit() {\n  const { pathname } = useLocation();\n  const [userFormDisabled] = useGlobalState('userFormDisabled');\n  return (\n    <input\n      type=\"submit\"\n      value={/login/.test(pathname) ? 'Login' : 'Register'}\n      disabled={userFormDisabled}\n    />\n  );\n}\n","export const baseFormLabels = {\n  username: 'Username',\n  email: 'Email',\n  password: 'Password',\n};\n\nexport const loginFormBaseData = {\n  username: '',\n  password: '',\n};\n\nexport const registerFormBaseData = {\n  username: '',\n  email: '',\n  password: '',\n};\n","import React, { useEffect } from 'react';\n\nimport BaseFlipForm from './base-flip-form';\nimport BaseInput from './base-input';\nimport BaseSubmit from './base-submit';\nimport { baseFormLabels } from './constants';\nimport { useGlobalState } from '../../state';\n\nimport styles from './base-form.module.css';\n\nexport default function BaseForm({ handleFormSubmit }) {\n  const [, setUserFormDisabled] = useGlobalState('userFormDisabled');\n  const [userFormData, setUserFormData] = useGlobalState('userFormData');\n\n  const validateForm = () => {\n    const activeInputs = formInputs.filter((input) => input !== null);\n    for (let i = 0; i < activeInputs.length; i += 1) {\n      const { type, value } = activeInputs[i].props;\n      // ignore checkboxes and check for blanks\n      if (type !== 'checkbox' && !value) {\n        return setUserFormDisabled(true);\n      }\n    }\n    return setUserFormDisabled(false);\n  };\n\n  useEffect(() => {\n    validateForm();\n  });\n\n  const handleInputChange = (e) => {\n    let value = e.target.value;\n    // make sure we are using the right value type\n    if (e.target.type === 'checkbox') {\n      value = e.target.checked;\n    } else if (e.target.type === 'number') {\n      value = parseInt(e.target.value);\n    }\n    setUserFormData({\n      ...userFormData,\n      [e.target.name]: value,\n    });\n  };\n\n  const formInputs = Object.entries(userFormData)?.map(([key], i) => {\n    // render inputs dynamically based on form data structure\n    let type = 'text';\n    if (key === 'email' || key === 'password') {\n      type = key;\n    }\n    return (\n      <BaseInput\n        key={`Base Input ${i}`}\n        name={key}\n        label={baseFormLabels[key]}\n        type={type}\n        value={userFormData[key]}\n        handleInputChange={handleInputChange}\n      />\n    );\n  });\n\n  return (\n    <form className={styles.baseForm} onSubmit={handleFormSubmit}>\n      {formInputs}\n      <section className={styles.baseButtons}>\n        <BaseSubmit />\n        <BaseFlipForm />\n      </section>\n    </form>\n  );\n}\n","export const isAuthorized = async () => {\n  try {\n    const req = await fetch(`/api/auth`, {\n      method: 'GET',\n      credentials: 'include',\n    });\n    if (!req.ok) {\n      return false;\n    }\n    const resp = await req.json();\n    if (!resp.success) {\n      return false;\n    }\n    return resp;\n  } catch (err) {\n    return err;\n  }\n};\n\nexport const isAdminAuthorized = async () => {\n  try {\n    const req = await fetch(`/api/auth-admin`, {\n      method: 'GET',\n      credentials: 'include',\n    });\n    if (!req.ok) {\n      return false;\n    }\n    const resp = await req.json();\n    if (!resp.success) {\n      return false;\n    }\n    return resp;\n  } catch (err) {\n    return err;\n  }\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { Redirect, useHistory, useLocation } from 'react-router';\n\nimport BaseForm from './base-form';\nimport { loginFormBaseData } from './constants';\nimport { useGlobalState } from '../../state';\nimport { isAdminAuthorized } from '../auth/utils';\n\nimport styles from './base-form.module.css';\n\nexport default function LoginForm({ adminRequired }) {\n  const [userFormData, setUserFormData] = useGlobalState('userFormData');\n  const [userFormError, setUserFormError] = useGlobalState('userFormError');\n  const [userFormSuccess, setUserFormSuccess] =\n    useGlobalState('userFormSuccess');\n  const [, setUserFormDisabled] = useGlobalState('userFormDisabled');\n  const [, setUserFormInputDisabled] = useGlobalState('userFormInputDisabled');\n  const [loggedIn, setLoggedIn] = useGlobalState('loggedIn');\n  const [, setCurrentUser] = useGlobalState('currentUser');\n  const [, setIsAdmin] = useGlobalState('isAdmin');\n  const history = useHistory();\n  const historyState = useLocation();\n  const [loaded, setLoaded] = useState(false);\n\n  const resetFormData = useCallback(() => {\n    setUserFormData(loginFormBaseData);\n    setUserFormDisabled(false);\n    setUserFormInputDisabled(false);\n    setUserFormError('');\n    setUserFormSuccess('');\n  }, [\n    setUserFormData,\n    setUserFormDisabled,\n    setUserFormInputDisabled,\n    setUserFormError,\n    setUserFormSuccess,\n  ]);\n\n  useEffect(() => {\n    if (userFormSuccess) {\n      setTimeout(() => setUserFormSuccess(''), 3000);\n    }\n    if (userFormError) {\n      setTimeout(() => setUserFormError(''), 5000);\n    }\n  });\n\n  useEffect(() => {\n    if (!loaded) {\n      resetFormData();\n      setLoaded(true);\n    }\n  }, [setLoaded, loaded, resetFormData]);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setUserFormDisabled(true);\n    setUserFormInputDisabled(true);\n    const req = await fetch('/api/login', {\n      method: 'POST', // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors', // no-cors, *cors, same-origin\n      cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: 'same-origin', // include, *same-origin, omit\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(userFormData),\n    });\n\n    if (req.status === 401) {\n      resetFormData();\n      return setUserFormError('Username or password is invalid.');\n    }\n\n    if (!req.ok) {\n      const { status, statusText } = req;\n      resetFormData();\n      return setUserFormError(\n        `${status} error: ${statusText}. Please try again later.`,\n      );\n    }\n\n    const resp = await req.json();\n\n    if (!resp.success) {\n      resetFormData();\n      return setUserFormError(`Error: ${resp.error}. Please try again later.`);\n    }\n\n    if (adminRequired) {\n      const adminAuthorized = await isAdminAuthorized();\n      if (!adminAuthorized) {\n        setIsAdmin(false);\n        setLoggedIn(false);\n        resetFormData();\n        return setUserFormError(`Error: you are not an administrator.`);\n      }\n      setIsAdmin(true);\n    }\n\n    setLoggedIn(true);\n    setCurrentUser(resp.data);\n    resetFormData();\n    setUserFormSuccess(`Success: logged in. Automatically redirecting.`);\n    return setTimeout(\n      () => history.push(historyState?.state?.from?.pathname || '/'),\n      1000,\n    );\n  };\n\n  if (loggedIn)\n    return <Redirect to={historyState?.state?.from?.pathname || '/'} />;\n\n  return (\n    <>\n      {loaded && <BaseForm formType=\"login\" handleFormSubmit={handleLogin} />}\n      {userFormSuccess && (\n        <span className={styles.success}>{userFormSuccess}</span>\n      )}\n      {userFormError && <span className={styles.error}>{userFormError}</span>}\n    </>\n  );\n}\n","import React from 'react';\nimport LoginForm from '../../components/user-form/login-form';\n\nexport default function Login() {\n  return (\n    <>\n      <h2>Login</h2>\n      <h3>Please login to view this page.</h3>\n      <LoginForm />\n    </>\n  );\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router';\n\nimport BaseForm from './base-form';\nimport { registerFormBaseData } from './constants';\nimport { useGlobalState } from '../../state';\n\nimport styles from './base-form.module.css';\n\nexport default function RegisterForm() {\n  const [userFormData, setUserFormData] = useGlobalState('userFormData');\n  const [userFormError, setUserFormError] = useGlobalState('userFormError');\n  const [userFormSuccess, setUserFormSuccess] =\n    useGlobalState('userFormSuccess');\n  const [, setUserFormDisabled] = useGlobalState('userFormDisabled');\n  const [, setUserFormInputDisabled] = useGlobalState('userFormInputDisabled');\n  const [, setLoggedIn] = useGlobalState('loggedIn');\n  const [, setCurrentUser] = useGlobalState('currentUser');\n  const history = useHistory();\n  const historyState = useLocation();\n  const [loaded, setLoaded] = useState(false);\n\n  const resetFormData = useCallback(() => {\n    setUserFormData(registerFormBaseData);\n    setUserFormDisabled(false);\n    setUserFormInputDisabled(false);\n    setUserFormError('');\n    setUserFormSuccess('');\n  }, [\n    setUserFormData,\n    setUserFormDisabled,\n    setUserFormInputDisabled,\n    setUserFormError,\n    setUserFormSuccess,\n  ]);\n\n  useEffect(() => {\n    if (userFormSuccess) {\n      setTimeout(() => setUserFormSuccess(''), 3000);\n    }\n    if (userFormError) {\n      setTimeout(() => setUserFormError(''), 5000);\n    }\n  });\n\n  useEffect(() => {\n    if (!loaded) {\n      resetFormData();\n      setLoaded(true);\n    }\n  }, [setLoaded, loaded, resetFormData]);\n\n  const handleRegister = async (e) => {\n    e.preventDefault();\n    setUserFormDisabled(true);\n    setUserFormInputDisabled(true);\n    const req = await fetch('/api/register', {\n      method: 'POST', // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors', // no-cors, *cors, same-origin\n      cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: 'same-origin', // include, *same-origin, omit\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(userFormData),\n    });\n\n    if (!req.status === 201) {\n      const { status, message } = req;\n      resetFormData();\n      return setUserFormError(`${status} error: ${message}.`);\n    }\n\n    const resp = await req.json();\n\n    if (!resp.success) {\n      resetFormData();\n      return setUserFormError(`Error: ${resp.error}. Please try again later.`);\n    }\n\n    setLoggedIn(true);\n    setCurrentUser(resp.data);\n    resetFormData();\n    setUserFormSuccess(`Successfully registered user ${resp.data.username}`);\n    return history.push(historyState?.state?.from?.pathname || '/');\n  };\n\n  return (\n    <>\n      {loaded && (\n        <BaseForm formType=\"register\" handleFormSubmit={handleRegister} />\n      )}\n      {userFormSuccess && (\n        <span className={styles.success}>{userFormSuccess}</span>\n      )}\n      {userFormError && <span className={styles.error}>{userFormError}</span>}\n    </>\n  );\n}\n","import React from 'react';\n\nimport RegisterForm from '../../components/user-form/register-form';\n\nexport default function Register() {\n  return (\n    <>\n      <h2>Register</h2>\n      <h3>Create a new account to get started.</h3>\n      <RegisterForm />\n    </>\n  );\n}\n","import React from 'react';\nimport { Redirect, Route } from 'react-router';\n\nimport { useGlobalState } from '../../state';\n\nexport default function AdminAuthorized({ location, ...props }) {\n  const [loggedIn] = useGlobalState('loggedIn');\n  const [isAdmin] = useGlobalState('isAdmin');\n\n  return (\n    <>\n      {loggedIn && isAdmin ? (\n        <Route {...props} />\n      ) : (\n        <Redirect\n          to={{ pathname: '/admin-login', state: { from: location } }}\n        />\n      )}\n    </>\n  );\n}\n","import React from 'react';\nimport LoginForm from '../../components/user-form/login-form';\n\nexport default function AdminLogin() {\n  return (\n    <>\n      <h2>Admin Login</h2>\n      <h3>You must be an administrator to view this page.</h3>\n      <LoginForm adminRequired={true} />\n    </>\n  );\n}\n","import React from 'react';\nimport { Redirect, Route } from 'react-router';\n\nimport { useGlobalState } from '../../state';\n\nexport default function Unauthorized({ location, ...props }) {\n  const [loggedIn] = useGlobalState('loggedIn');\n\n  return (\n    <>\n      {loggedIn ? (\n        <Redirect to={{ pathname: '/', state: { from: location } }} />\n      ) : (\n        <Route {...props} />\n      )}\n    </>\n  );\n}\n","import React from 'react';\nimport { Redirect, Route } from 'react-router';\n\nimport { useGlobalState } from '../../state';\n\nexport default function Authorized({ location, ...props }) {\n  const [loggedIn] = useGlobalState('loggedIn');\n\n  return (\n    <>\n      {loggedIn ? (\n        <Route {...props} />\n      ) : (\n        <Redirect to={{ pathname: '/login', state: { from: location } }} />\n      )}\n    </>\n  );\n}\n","import React from 'react';\n\nimport { useGlobalState } from '../../state';\n\nexport default function UserDetails() {\n  const [currentUser] = useGlobalState('currentUser');\n  const { username, email } = currentUser;\n  return (\n    <>\n      <article>\n        <p>{username}</p>\n        <p>{email}</p>\n      </article>\n    </>\n  );\n}\n","import React from 'react';\n\nimport UserDetails from '../../components/profile/user-details';\n\nexport default function Profile() {\n  return <UserDetails />;\n}\n","import React from 'react';\nimport { useHistory } from 'react-router';\n\nimport { useGlobalState } from '../../state';\n\nexport default function NavLogout() {\n  const [loggedIn, setLoggedIn] = useGlobalState('loggedIn');\n  const [currentUser, setCurrentUser] = useGlobalState('currentUser');\n  const history = useHistory();\n  const handleLogout = async () => {\n    if (!loggedIn) {\n      return; // TODO handle already logged in error\n    }\n    const req = await fetch('/api/logout', {\n      method: 'POST', // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors', // no-cors, *cors, same-origin\n      cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: 'same-origin', // include, *same-origin, omit\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(currentUser),\n    });\n    if (!req.ok) {\n      return; // TODO handle logout error message\n    }\n    const resp = await req.json();\n    if (!resp) {\n      return; // TODO handle logout error message\n    }\n    const { success, message } = resp;\n    if (!success) {\n      console.log(message);\n      return; // TODO handle logout error message\n    }\n    localStorage.clear();\n    setCurrentUser({});\n    setLoggedIn(false);\n    return history.push('/');\n  };\n  return <button onClick={handleLogout}>Logout</button>;\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { useGlobalState } from '../../state';\nimport NavLogout from './nav-logout';\n\nimport styles from './nav.module.css';\n\nexport default function Nav() {\n  const [loggedIn] = useGlobalState('loggedIn');\n  if (loggedIn) {\n    return (\n      <nav className={styles.nav}>\n        <Link to=\"/\">Play</Link>\n        <Link to=\"/profile\">Profile</Link>\n        <NavLogout />\n      </nav>\n    );\n  }\n\n  return (\n    <nav className={styles.nav}>\n      <Link to=\"/\">Play</Link>\n      <Link to=\"/register\">Register</Link>\n      <Link to=\"/login\">Login</Link>\n    </nav>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport AddFood from '../add-food/add-food';\nimport Game from '../game/game';\nimport Login from '../login/login';\nimport Register from '../register/register';\nimport AdminAuthorized from '../../components/auth/auth-admin';\nimport AdminLogin from '../login/admin-login';\nimport Unauthorized from '../../components/auth/un-auth';\nimport Authorized from '../../components/auth/auth';\nimport Profile from '../profile/profile';\nimport Nav from '../../components/nav/nav';\nimport { useGlobalState } from '../../state';\nimport {\n  isAuthorized,\n  isAdminAuthorized,\n} from '../../components/auth/utils/index';\n\nimport styles from './app.module.css';\n\nexport default function App() {\n  const [loggedIn, setLoggedIn] = useGlobalState('loggedIn');\n  const [, setIsAdmin] = useGlobalState('isAdmin');\n  const [, setCurrentUser] = useGlobalState('currentUser');\n  const [loaded, setLoaded] = useState(false);\n\n  useEffect(() => {\n    const getLoginStatus = async () => {\n      const authStatus = await isAuthorized();\n      if (authStatus.success) {\n        setLoggedIn(true);\n        setCurrentUser(authStatus.data);\n      }\n      const adminStatus = await isAdminAuthorized();\n      if (adminStatus.success) {\n        setIsAdmin(true);\n      }\n      setLoaded(true);\n    };\n\n    getLoginStatus();\n  }, [loggedIn, setLoggedIn, setCurrentUser, setIsAdmin]);\n\n  return (\n    <div className={styles.app}>\n      {loaded && (\n        <>\n          <Router>\n            <Nav />\n            <Switch>\n              <AdminAuthorized path=\"/add-food\" component={AddFood} />\n              <Route path=\"/admin-login\" component={AdminLogin} />\n              <Unauthorized path=\"/login\" component={Login} />\n              <Unauthorized path=\"/register\" component={Register} />\n              <Authorized path=\"/profile\" component={Profile} />\n              <Route path=\"/\" component={Game} />\n            </Switch>\n          </Router>\n        </>\n      )}\n    </div>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './pages/app/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}