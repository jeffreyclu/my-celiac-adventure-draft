(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports={foodList:"food-list_foodList__1reRd",foodListItems:"food-list_foodListItems__Vom0L",foodListItem:"food-list_foodListItem__2AAim",foodListFields:"food-list_foodListFields__1drop",headers:"food-list_headers__1zgGb",green:"food-list_green__3Ei-_"}},,,,function(e,t,a){e.exports={foodRow:"food-input_foodRow__3FaJC",foodLabel:"food-input_foodLabel__36i1a",short:"food-input_short__DWUPW",above:"food-input_above__3tFye",foodInput:"food-input_foodInput__3PEmn"}},function(e,t,a){e.exports={foodFormModal:"food-form_foodFormModal__1i0xW",foodFormModalOverlay:"food-form_foodFormModalOverlay__1g29t",foodFormContainer:"food-form_foodFormContainer__3VGNq",foodForm:"food-form_foodForm__2gEtH",foodButtons:"food-form_foodButtons__2Aahn"}},,,,function(e,t,a){e.exports={baseInputRow:"base-input_baseInputRow__11po3",baseLabel:"base-input_baseLabel__2FYvB",above:"base-input_above__MO3Bh",baseInput:"base-input_baseInput__ABmzd"}},,,,function(e,t,a){e.exports={foodTag:"food-tag_foodTag__2pFO_",used:"food-tag_used__1-LlO"}},,,function(e,t,a){e.exports={baseForm:"base-form_baseForm__fFcGB",baseButtons:"base-form_baseButtons__edZZ8"}},,,,function(e,t,a){e.exports={foodTags:"food-tags_foodTags__38xGE"}},function(e,t,a){e.exports={foodError:"food-error_foodError__2Xmmv"}},function(e,t,a){e.exports={foodSuccess:"food-success_foodSuccess__3NQQX"}},function(e,t,a){e.exports={foodItemOverlay:"food-item-overlay_foodItemOverlay__20Ma9"}},function(e,t,a){e.exports={showFoodFormButton:"show-food-form-button_showFoodFormButton__1oBC3"}},,function(e,t,a){e.exports={app:"app_app__Ohz0O"}},,,,,,,function(e,t,a){},,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(28),c=a.n(o),s=(a(43),a(4)),i=a.n(s),u=a(6),d=a(2),l=a(18),b=a(3),j=a(12),f=a(5),m=a(29),p=Object(m.a)({showAddFoodForm:!1,addFoodFormFetched:!1,addFoodFormDisabled:!1,addFoodFormEditable:!1,addFoodFormError:"",addFoodFormSuccess:"",addFoodFormFoods:[],addFoodFormSelectedFood:"",addFoodFormData:{},showAddFoodFormItemOverlay:-1,loginFormData:{},loginFormError:"",loginFormSuccess:"",loginFormDisabled:!1,registerFormData:{},registerFormError:"",registerFormSuccess:"",registerFormDisabled:!1,loggedIn:!1,isAdmin:!1,currentUser:{}}).useGlobalState,O=a(0);function h(){var e=p("addFoodFormDisabled"),t=Object(d.a)(e,1)[0];return Object(O.jsx)("input",{type:"submit",value:"Submit",disabled:t})}function x(){var e=p("addFoodFormSelectedFood"),t=Object(d.a)(e,2)[1],a=p("showAddFoodForm"),n=Object(d.a)(a,2)[1],r=p("addFoodFormDisabled"),o=Object(d.a)(r,2)[1];return Object(O.jsx)("button",{onClick:function(){t(""),n(!1),o(!0)},children:"Cancel"})}var g=a(14),v=a.n(g);function F(e){var t=e.name,a=e.label,n=e.type,r=e.value,o=e.handleInputChange,c=e.disabled;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("label",{className:"".concat(v.a.foodRow," ").concat("checkbox"===n&&v.a.short),children:[Object(O.jsx)("span",{className:"".concat(v.a.foodLabel," ").concat(("text"===n||"number"===n)&&v.a.above),children:a}),Object(O.jsx)("input",{className:"".concat(v.a.foodInput),name:t,type:n,value:r,checked:r,onChange:o,placeholder:"".concat(a," cannot be ").concat("number"===n?"zero":"blank"),disabled:c})]})})}var _=a(37),y=a(23),k=a.n(y);function E(e){var t=e.tag,a=Object(n.useState)(!1),r=Object(d.a)(a,2),o=r[0],c=r[1],s=p("addFoodFormData"),i=Object(d.a)(s,2),u=i[0],l=i[1],b=p("addFoodFormEditable"),j=Object(d.a)(b,1)[0];Object(n.useEffect)((function(){if(j)for(var e=0;e<u.tags.length;e+=1)u.tags[e]===t&&c(!0)}),[u,j,t,c]);return Object(O.jsx)("span",{className:"".concat(k.a.foodTag," ").concat(o&&k.a.used),onClick:function(){var e=Object(_.a)(u.tags);o?(e=e.filter((function(e){return e!==t})),c(!1)):(e.push(t),c(!0)),l(Object(f.a)(Object(f.a)({},u),{},{tags:e}))},children:t})}var w=a(30),S=a.n(w);function I(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),c=Object(d.a)(o,2),s=c[0],l=c[1],b=p("addFoodFormError"),j=Object(d.a)(b,1)[0],f=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,n,o,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("tags")){e.next=4;break}return t=JSON.parse(localStorage.getItem("tags")),l(t),e.abrupt("return",r(!0));case 4:return e.next=6,fetch("/api/tag/all");case 6:if((a=e.sent).ok){e.next=10;break}return n=a.status,o=a.statusText,e.abrupt("return",j("".concat(n," error: ").concat(o,". Please try again later.")));case 10:return e.next=12,a.json();case 12:c=e.sent,s=c.success,u=c.data,s?(localStorage.setItem("tags",JSON.stringify(u)),l(u),r(!0)):(j("Error: ".concat(u,". Please try again later.")),r(!1));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){a||f()}));var m=null===s||void 0===s?void 0:s.map((function(e,t){var a=e.tag;return Object(O.jsx)(E,{tag:a},"Tag_".concat(t))}));return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("section",{className:S.a.foodTags,children:m})})}var T={name:"Name",gluten:"Gluten",glutenExplanation:"Gluten Explanation",fructose:"Fructose",fructoseExplanation:"Fructose Explanation",lactose:"Lactose",lactoseExplanation:"Lactose Explanation",price:"Price",baseHunger:"Base Hunger",baseHealth:"Base Health",breakfast:"Breakfast",lunch:"Lunch",dinner:"Dinner",tags:"Tags"},C={name:"",gluten:1,glutenExplanation:"",fructose:!1,fructoseExplanation:"",lactose:!1,lactoseExplanation:"",price:1,baseHunger:1,baseHealth:1,breakfast:!1,lunch:!1,dinner:!1,tags:[]},N=a(15),L=a.n(N);function D(){var e,t,a=p("addFoodFormFetched"),r=Object(d.a)(a,2)[1],o=p("addFoodFormDisabled"),c=Object(d.a)(o,2)[1],s=p("showAddFoodForm"),l=Object(d.a)(s,2)[1],b=p("addFoodFormError"),m=Object(d.a)(b,2)[1],g=p("addFoodFormSuccess"),v=Object(d.a)(g,2)[1],_=p("addFoodFormEditable"),y=Object(d.a)(_,1)[0],k=p("addFoodFormData"),E=Object(d.a)(k,2),w=E[0],S=E[1],N=p("addFoodFormSelectedFood"),D=Object(d.a)(N,2),P=D[0],A=D[1],B=Object(n.useCallback)((function(){S(C)}),[S]);Object(n.useEffect)((function(){y||B()}),[B,y]);Object(n.useEffect)((function(){!function(){for(var e=M.filter((function(e){return null!==e})),t=0;t<e.length;t+=1){var a=e[t].props,n=a.type,r=a.value;if("checkbox"!==n&&!r)return c(!0)}c(!1)}()}));var R=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c(!0),y){e.next=8;break}return e.next=5,fetch("/api/food/one",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,fetch("/api/food/one/".concat(P),{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});case 10:a=e.sent;case 11:if(a.ok){e.next=14;break}return o=(n=a).status,s=n.statusText,e.abrupt("return",m("".concat(o," error: ").concat(s,". Please try again later.")));case 14:return e.next=16,a.json();case 16:if(!(u=e.sent).success){e.next=25;break}return B(),r(!1),l(!1),A(""),e.abrupt("return",v("Success: ".concat(u.data.name," was edited.")));case 25:return c(!1),e.abrupt("return",m("Error: ".concat(u.error,". Please try again later.")));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){var t=e.target.value;"checkbox"===e.target.type?t=e.target.checked:"number"===e.target.type&&(t=parseInt(e.target.value)),S(Object(f.a)(Object(f.a)({},w),{},Object(j.a)({},e.target.name,t)))},M=null===(e=Object.entries(w))||void 0===e||null===(t=e.filter((function(e){var t=Object(d.a)(e,1)[0];return!/_/.test(t)})))||void 0===t?void 0:t.map((function(e){var t=Object(d.a)(e,2),a=t[0],n=t[1],r="text";return"boolean"===typeof n?r="checkbox":"number"===typeof n&&(r="number"),("glutenExplanation"!==a||w.gluten)&&("fructoseExplanation"!==a||w.fructose)&&("lactoseExplanation"!==a||w.lactose)?Object(O.jsx)(F,{name:a,label:T[a],type:r,value:w[a],handleInputChange:J,disabled:"tags"===a},a):null}));return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:L.a.foodFormModalOverlay}),Object(O.jsx)("article",{className:L.a.foodFormModal,children:Object(O.jsxs)("div",{className:L.a.foodFormContainer,children:[Object(O.jsx)("h2",{children:y?"Edit a dish":"Add a dish"}),Object(O.jsxs)("form",{className:L.a.foodForm,onSubmit:R,children:[M,Object(O.jsx)(I,{}),Object(O.jsxs)("section",{className:L.a.foodButtons,children:[Object(O.jsx)(h,{}),Object(O.jsx)(x,{})]})]})]})})]})}var P=a(31),A=a.n(P);function B(){var e=p("addFoodFormError"),t=Object(d.a)(e,1)[0];return Object(O.jsx)("span",{className:A.a.foodError,children:t})}var R=a(32),J=a.n(R);function M(){var e=p("addFoodFormSuccess"),t=Object(d.a)(e,1)[0];return Object(O.jsx)("span",{className:J.a.foodSuccess,children:t})}var G=a(10),H=a.n(G);function U(){var e,t,a=null===(e=Object.values(T))||void 0===e||null===(t=e.filter((function(e){return!/Explanation/.test(e)})))||void 0===t?void 0:t.map((function(e,t){return Object(O.jsx)("span",{className:"".concat(H.a.foodListFields," ").concat(H.a.headers),children:e},"Header_".concat(t))}));return Object(O.jsx)("section",{className:H.a.foodListItem,children:a})}var z=a(33),q=a.n(z);function W(e){var t=e._id,a=p("addFoodFormError"),n=Object(d.a)(a,2)[1],r=p("addFoodFormData"),o=Object(d.a)(r,2)[1],c=p("addFoodFormEditable"),s=Object(d.a)(c,2)[1],l=p("showAddFoodForm"),b=Object(d.a)(l,2)[1],j=p("addFoodFormFetched"),f=Object(d.a)(j,2)[1],m=p("addFoodFormSuccess"),h=Object(d.a)(m,2)[1],x=p("addFoodFormSelectedFood"),g=Object(d.a)(x,2)[1],v=function(){var e=Object(u.a)(i.a.mark((function e(){var a,r,c,u,l,j,f,m,p,O,h,x,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/one/".concat(t));case 2:if((a=e.sent).ok){e.next=6;break}return r=a.status,c=a.statusText,e.abrupt("return",n("".concat(r," error: ").concat(c,". Please try again later.")));case 6:return e.next=8,a.json();case 8:if(u=e.sent,l=u.success,j=u.data,l){for(m=null===(f=Object.entries(j))||void 0===f?void 0:f.filter((function(e){var t=Object(d.a)(e,1)[0];return!/_/.test(t)})),p=Object.assign({},C),O=0;O<m.length;O+=1)h=Object(d.a)(m[O],2),x=h[0],v=h[1],p[x]=v;g(t),o(p),s(!0),b(!0)}else n("Error: ".concat(j,". Please try again later."));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(i.a.mark((function e(){var a,r,o,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/one/".concat(t),{method:"DELETE"});case 2:if((a=e.sent).ok){e.next=6;break}return r=a.status,o=a.statusText,e.abrupt("return",n("".concat(r," error: ").concat(o,". Please try again later.")));case 6:return e.next=8,a.json();case 8:c=e.sent,s=c.success,u=c.data,s?(f(!1),h("Success: ".concat(u.name," was deleted."))):n("Error: ".concat(u,". Please try again later."));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("section",{className:q.a.foodItemOverlay,children:[Object(O.jsx)("button",{onClick:v,children:"Edit"}),Object(O.jsx)("button",{onClick:F,children:"Delete"})]})}function V(e){var t,a,n=e.food,r=e.index,o=n._id,c=p("showAddFoodFormItemOverlay"),s=Object(d.a)(c,2),i=s[0],u=s[1],l=null===(t=Object.entries(n))||void 0===t||null===(a=t.filter((function(e){var t=Object(d.a)(e,1)[0];return!/Explanation|_/.test(t)})))||void 0===a?void 0:a.map((function(e,t){var a=Object(d.a)(e,2),n=(a[0],a[1]),r=n;return"string"===typeof n&&n.length>32&&(r=n.slice(0,29)+"..."),Object(O.jsx)("span",{className:"".concat(H.a.foodListFields," ").concat(!0===n&&H.a.green),children:"string"===typeof n?r:JSON.stringify(n)},"Value_".concat(t))}));return Object(O.jsxs)("article",{onClick:function(){return u(i===r?-1:r)},className:H.a.foodListItem,children:[l,i===r&&Object(O.jsx)(W,{_id:o})]})}function Q(){var e=p("addFoodFormFoods"),t=Object(d.a)(e,1)[0],a=null===t||void 0===t?void 0:t.map((function(e,t){return Object(O.jsx)(V,{food:e,index:t},"Item_".concat(t))}));return Object(O.jsx)("section",{className:H.a.foodListItems,children:a})}function X(){return Object(O.jsx)("span",{children:"Please wait, loading..."})}function Y(){var e=p("addFoodFormFoods"),t=Object(d.a)(e,2)[1],a=p("addFoodFormFetched"),r=Object(d.a)(a,2),o=r[0],c=r[1],s=p("addFoodFormError"),l=Object(d.a)(s,2),b=l[0],j=l[1],f=p("addFoodFormSuccess"),m=Object(d.a)(f,2),h=m[0],x=m[1],g=function(){var e=Object(u.a)(i.a.mark((function e(){var a,n,r,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/all");case 2:if((a=e.sent).ok){e.next=6;break}return n=a.status,r=a.statusText,e.abrupt("return",j("".concat(n," error: ").concat(r,". Please try again later.")));case 6:return e.next=8,a.json();case 8:o=e.sent,s=o.success,u=o.data,s?(t(u),c(!0)):(j("Error: ".concat(u,". Please try again later.")),c(!1));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o||g()})),Object(n.useEffect)((function(){h&&setTimeout((function(){return x("")}),3e3),b&&setTimeout((function(){return j("")}),5e3)})),Object(O.jsxs)("article",{className:H.a.foodList,children:[Object(O.jsx)("h2",{children:"Submitted Dishes"}),Object(O.jsx)(U,{}),o?Object(O.jsx)(Q,{}):Object(O.jsx)(X,{}),b&&Object(O.jsx)(B,{}),h&&Object(O.jsx)(M,{})]})}var Z=a(34),K=a.n(Z);function $(){var e=p("showAddFoodForm"),t=Object(d.a)(e,2),a=t[0],n=t[1],r=p("addFoodFormEditable"),o=Object(d.a)(r,2)[1],c=p("showAddFoodFormItemOverlay"),s=Object(d.a)(c,2)[1];return Object(O.jsx)("button",{className:K.a.showFoodFormButton,onClick:function(){o(!1),n(!0),s(-1)},disabled:a,children:"Add a dish"})}function ee(){var e=p("loggedIn"),t=Object(d.a)(e,2),a=t[0],n=t[1],r=p("currentUser"),o=Object(d.a)(r,2),c=o[0],s=o[1],l=Object(b.g)(),j=function(){var e=Object(u.a)(i.a.mark((function e(){var t,r,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/api/logout",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 4:if(t=e.sent,console.log("here"),t.ok){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,t.json();case 10:if(r=e.sent){e.next=13;break}return e.abrupt("return");case 13:if(o=r.success,u=r.message,o){e.next=17;break}return console.log(u),e.abrupt("return");case 17:return s({}),n(!1),e.abrupt("return",l.push("/"));case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)("button",{onClick:j,children:"Logout"})}function te(){return Object(O.jsx)("nav",{children:Object(O.jsx)(ee,{})})}var ae=function(){var e=p("showAddFoodForm"),t=Object(d.a)(e,1)[0];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(te,{}),Object(O.jsx)(Y,{}),!t&&Object(O.jsx)($,{}),t&&Object(O.jsx)(D,{})]})};function ne(){var e=p("loggedIn"),t=Object(d.a)(e,1)[0],a=p("currentUser"),n=Object(d.a)(a,1)[0];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"My Celiac Adventure"}),t&&Object(O.jsxs)("h3",{children:["Welcome ",n.username]})]})}var re=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/auth",{method:"GET",credentials:"include"});case 3:if((t=e.sent).ok){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,t.json();case 8:if((a=e.sent).success){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",a);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/auth-admin",{method:"GET",credentials:"include"});case 3:if((t=e.sent).ok){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,t.json();case 8:if((a=e.sent).success){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",a);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();function ce(){var e=Object(b.h)().pathname;return Object(O.jsx)(O.Fragment,{children:/login/.test(e)?Object(O.jsx)(l.b,{to:"/register",children:"Register Instead"}):Object(O.jsx)(l.b,{to:"/login",children:"Login Instead"})})}var se=a(19),ie=a.n(se);function ue(e){var t=e.label,a=e.name,n=e.type,r=e.value,o=e.handleInputChange,c=e.disabled;return Object(O.jsxs)("label",{className:ie.a.baseInputRow,children:[Object(O.jsx)("span",{className:"".concat(ie.a.baseLabel," ").concat(ie.a.above),children:t}),Object(O.jsx)("input",{className:ie.a.baseInput,name:a,type:n,value:r,placeholder:"".concat(t," cannot be ").concat("number"===n?"zero":"blank"),onChange:o,disabled:c})]})}function de(){var e=Object(b.h)().pathname,t=p("loginFormDisabled"),a=Object(d.a)(t,1)[0];return Object(O.jsx)("input",{type:"submit",value:/login/.test(e)?"Login":"Register",disabled:a})}var le=a(26),be=a.n(le);function je(e){var t=e.formType,a=e.handleFormSubmit,n=e.handleInputChange,r=e.formData;return Object(O.jsxs)("form",{className:be.a.baseForm,onSubmit:a,children:[Object(O.jsx)(ue,{label:"Username",type:"text",name:"username",value:null===r||void 0===r?void 0:r.username,handleInputChange:n}),"register"===t&&Object(O.jsx)(ue,{label:"Email",type:"email",name:"email",value:null===r||void 0===r?void 0:r.email,handleInputChange:n}),Object(O.jsx)(ue,{label:"Password",type:"password",name:"password",value:null===r||void 0===r?void 0:r.password,handleInputChange:n}),Object(O.jsxs)("section",{className:be.a.baseButtons,children:[Object(O.jsx)(de,{}),Object(O.jsx)(ce,{})]})]})}function fe(e){var t=e.adminRequired,a=p("loginFormData"),r=Object(d.a)(a,2),o=r[0],c=r[1],s=p("loginFormError"),l=Object(d.a)(s,2),m=l[0],h=l[1],x=p("loginFormSuccess"),g=Object(d.a)(x,2),v=g[0],F=g[1],_=p("loginFormDisabled"),y=Object(d.a)(_,2)[1],k=p("loggedIn"),E=Object(d.a)(k,2)[1],w=p("isAdmin"),S=Object(d.a)(w,2)[1],I=Object(b.g)(),T=Object(b.h)(),C=Object(n.useState)(!1),N=Object(d.a)(C,2),L=N[0],D=N[1],P=Object(n.useCallback)((function(){c({username:"",password:""}),y(!1)}),[c,y]);Object(n.useEffect)((function(){v&&setTimeout((function(){return F("")}),3e3),m&&setTimeout((function(){return h("")}),5e3)})),Object(n.useEffect)((function(){L||(P(),D(!0))}),[D,L,P]);var A=function(){var e=Object(u.a)(i.a.mark((function e(a){var n,r,c,s,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),y(!0),e.next=4,fetch("/api/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 4:if(401!==(c=e.sent).status){e.next=8;break}return P(),e.abrupt("return",h("Username or password is invalid."));case 8:if(c.ok){e.next=12;break}return s=c.status,u=c.statusText,P(),e.abrupt("return",h("".concat(s," error: ").concat(u,". Please try again later.")));case 12:return e.next=14,c.json();case 14:if((d=e.sent).success){e.next=18;break}return P(),e.abrupt("return",h("Error: ".concat(d.error,". Please try again later.")));case 18:if(!t){e.next=28;break}return e.next=21,oe();case 21:if(e.sent){e.next=27;break}return S(!1),E(!1),P(),e.abrupt("return",h("Error: you are not an administrator."));case 27:S(!0);case 28:return E(!0),P(),F("Success: logged in."),e.abrupt("return",I.push((null===T||void 0===T||null===(n=T.state)||void 0===n||null===(r=n.from)||void 0===r?void 0:r.pathname)||"/"));case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[L&&Object(O.jsx)(je,{formType:"login",handleFormSubmit:A,handleInputChange:function(e){var t=e.target.value;"checkbox"===e.target.type?t=e.target.checked:"number"===e.target.type&&(t=parseInt(e.target.value)),c(Object(f.a)(Object(f.a)({},o),{},Object(j.a)({},e.target.name,t)))},formData:o}),v&&Object(O.jsx)("span",{children:v}),m&&Object(O.jsx)("span",{children:m})]})}function me(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"Login"}),Object(O.jsx)("h3",{children:"Please login to view this page."}),Object(O.jsx)(fe,{})]})}function pe(e){e.adminRequired;var t=p("registerFormData"),a=Object(d.a)(t,2),r=a[0],o=a[1],c=p("registerFormError"),s=Object(d.a)(c,2),l=s[0],m=s[1],h=p("registerFormSuccess"),x=Object(d.a)(h,2),g=x[0],v=x[1],F=p("registerFormDisabled"),_=Object(d.a)(F,2)[1],y=p("loggedIn"),k=Object(d.a)(y,2)[1],E=Object(b.g)(),w=Object(b.h)(),S=Object(n.useState)(!1),I=Object(d.a)(S,2),T=I[0],C=I[1],N=Object(n.useCallback)((function(){o({username:"",email:"",password:""}),_(!1)}),[o,_]);Object(n.useEffect)((function(){g&&setTimeout((function(){return v("")}),3e3),l&&setTimeout((function(){return m("")}),5e3)})),Object(n.useEffect)((function(){T||(N(),C(!0))}),[C,T,N]);var L=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,o,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),_(!0),e.next=4,fetch("/api/register",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:if(201!==!(o=e.sent).status){e.next=10;break}return console.log(o),c=o.status,s=o.message,N(),e.abrupt("return",m("".concat(c," error: ").concat(s,".")));case 10:return e.next=12,o.json();case 12:if((u=e.sent).success){e.next=16;break}return N(),e.abrupt("return",m("Error: ".concat(u.error,". Please try again later.")));case 16:return k(!0),N(),v("Success: logged in."),e.abrupt("return",E.push((null===w||void 0===w||null===(a=w.state)||void 0===a||null===(n=a.from)||void 0===n?void 0:n.pathname)||"/"));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[T&&Object(O.jsx)(je,{formType:"register",handleFormSubmit:L,handleInputChange:function(e){var t=e.target.value;"checkbox"===e.target.type?t=e.target.checked:"number"===e.target.type&&(t=parseInt(e.target.value)),o(Object(f.a)(Object(f.a)({},r),{},Object(j.a)({},e.target.name,t)))},formData:r}),g&&Object(O.jsx)("span",{children:g}),l&&Object(O.jsx)("span",{children:l})]})}function Oe(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"Register"}),Object(O.jsx)("h3",{children:"Create a new account to get started."}),Object(O.jsx)(pe,{})]})}var he=a(36),xe=a.n(he),ge=a(38);function ve(e){var t=e.location,a=Object(ge.a)(e,["location"]),n=p("loggedIn"),r=Object(d.a)(n,1)[0],o=p("isAdmin"),c=Object(d.a)(o,1)[0];return Object(O.jsx)(O.Fragment,{children:r&&c?Object(O.jsx)(b.b,Object(f.a)({},a)):Object(O.jsx)(b.a,{to:{pathname:"/admin-login",state:{from:t}}})})}function Fe(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"Admin Login"}),Object(O.jsx)("h3",{children:"You must be an administrator to view this page."}),Object(O.jsx)(fe,{adminRequired:!0})]})}function _e(){var e=p("loggedIn"),t=Object(d.a)(e,2),a=t[0],r=t[1],o=p("isAdmin"),c=Object(d.a)(o,2),s=(c[0],c[1]),j=p("currentUser"),f=Object(d.a)(j,2)[1],m=Object(n.useState)(!1),h=Object(d.a)(m,2),x=h[0],g=h[1];return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:return(t=e.sent).success&&(r(!0),f(t.data)),e.next=6,oe();case 6:e.sent.success&&s(!0),g(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,r,f,s]),Object(O.jsx)("div",{className:xe.a.app,children:x&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(l.a,{children:Object(O.jsxs)(b.d,{children:[Object(O.jsx)(ve,{path:"/add-food",component:ae}),Object(O.jsx)(b.b,{path:"/admin-login",component:Fe}),Object(O.jsx)(b.b,{path:"/login",component:me}),Object(O.jsx)(b.b,{path:"/register",component:Oe}),Object(O.jsx)(b.b,{path:"/",component:ne})]})})})})}var ye=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,52)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),o(e),c(e)}))};c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(_e,{})}),document.getElementById("root")),ye()}],[[51,1,2]]]);
//# sourceMappingURL=main.7eb69bc0.chunk.js.map