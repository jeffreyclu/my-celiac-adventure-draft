(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports={foodList:"food-list_foodList__1reRd",foodListItems:"food-list_foodListItems__Vom0L",foodListItem:"food-list_foodListItem__2AAim",foodListFields:"food-list_foodListFields__1drop",headers:"food-list_headers__1zgGb",green:"food-list_green__3Ei-_"}},,,function(e,t,a){e.exports={baseForm:"base-form_baseForm__fFcGB",baseButtons:"base-form_baseButtons__edZZ8",success:"base-form_success__2KhND",error:"base-form_error__3jyA1"}},,,,function(e,t,a){e.exports={foodRow:"food-input_foodRow__3FaJC",foodLabel:"food-input_foodLabel__36i1a",short:"food-input_short__DWUPW",above:"food-input_above__3tFye",foodInput:"food-input_foodInput__3PEmn"}},function(e,t,a){e.exports={foodFormModal:"food-form_foodFormModal__1i0xW",foodFormModalOverlay:"food-form_foodFormModalOverlay__1g29t",foodFormContainer:"food-form_foodFormContainer__3VGNq",foodForm:"food-form_foodForm__2gEtH",foodButtons:"food-form_foodButtons__2Aahn"}},,,function(e,t,a){e.exports={baseInputRow:"base-input_baseInputRow__11po3",baseLabel:"base-input_baseLabel__2FYvB",above:"base-input_above__MO3Bh",baseInput:"base-input_baseInput__ABmzd"}},,,,function(e,t,a){e.exports={foodTag:"food-tag_foodTag__2pFO_",used:"food-tag_used__1-LlO"}},,,function(e,t,a){e.exports={nav:"nav_nav__3AJrQ"}},,,,function(e,t,a){e.exports={foodTags:"food-tags_foodTags__38xGE"}},function(e,t,a){e.exports={foodError:"food-error_foodError__2Xmmv"}},function(e,t,a){e.exports={foodSuccess:"food-success_foodSuccess__3NQQX"}},function(e,t,a){e.exports={foodItemOverlay:"food-item-overlay_foodItemOverlay__20Ma9"}},function(e,t,a){e.exports={showFoodFormButton:"show-food-form-button_showFoodFormButton__1oBC3"}},,function(e,t,a){e.exports={app:"app_app__Ohz0O"}},,,,,,function(e,t,a){},,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(30),c=a.n(o),s=(a(44),a(4)),u=a.n(s),i=a(6),d=a(2),l=a(12),b=a(3),j=a(14),f=a(5),m=a(31),O=Object(m.a)({showAddFoodForm:!1,addFoodFormFetched:!1,addFoodFormDisabled:!1,addFoodFormEditable:!1,addFoodFormError:"",addFoodFormSuccess:"",addFoodFormFoods:[],addFoodFormSelectedFood:"",addFoodFormData:{},showAddFoodFormItemOverlay:-1,userFormData:{},userFormSuccess:"",userFormError:"",userFormInputDisabled:!1,userFormDisabled:!1,loggedIn:!1,isAdmin:!1,currentUser:{}}).useGlobalState,p=a(0);function h(){var e=O("addFoodFormDisabled"),t=Object(d.a)(e,1)[0];return Object(p.jsx)("input",{type:"submit",value:"Submit",disabled:t})}function x(){var e=O("addFoodFormSelectedFood"),t=Object(d.a)(e,2)[1],a=O("showAddFoodForm"),r=Object(d.a)(a,2)[1],n=O("addFoodFormDisabled"),o=Object(d.a)(n,2)[1];return Object(p.jsx)("button",{onClick:function(){t(""),r(!1),o(!0)},children:"Cancel"})}var v=a(17),g=a.n(v);function F(e){var t=e.name,a=e.label,r=e.type,n=e.value,o=e.handleInputChange,c=e.disabled;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("label",{className:"".concat(g.a.foodRow," ").concat("checkbox"===r&&g.a.short),children:[Object(p.jsx)("span",{className:"".concat(g.a.foodLabel," ").concat(("text"===r||"number"===r)&&g.a.above),children:a}),Object(p.jsx)("input",{className:"".concat(g.a.foodInput),name:t,type:r,value:n,checked:n,onChange:o,placeholder:"".concat(a," cannot be ").concat("number"===r?"zero":"blank"),disabled:c})]})})}var _=a(39),y=a(25),k=a.n(y);function E(e){var t=e.tag,a=Object(r.useState)(!1),n=Object(d.a)(a,2),o=n[0],c=n[1],s=O("addFoodFormData"),u=Object(d.a)(s,2),i=u[0],l=u[1],b=O("addFoodFormEditable"),j=Object(d.a)(b,1)[0];Object(r.useEffect)((function(){if(j)for(var e=0;e<i.tags.length;e+=1)i.tags[e]===t&&c(!0)}),[i,j,t,c]);return Object(p.jsx)("span",{className:"".concat(k.a.foodTag," ").concat(o&&k.a.used),onClick:function(){var e=Object(_.a)(i.tags);o?(e=e.filter((function(e){return e!==t})),c(!1)):(e.push(t),c(!0)),l(Object(f.a)(Object(f.a)({},i),{},{tags:e}))},children:t})}var w=a(32),I=a.n(w);function S(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)([]),c=Object(d.a)(o,2),s=c[0],l=c[1],b=O("addFoodFormError"),j=Object(d.a)(b,1)[0],f=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a,r,o,c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("tags")){e.next=4;break}return t=JSON.parse(localStorage.getItem("tags")),l(t),e.abrupt("return",n(!0));case 4:return e.next=6,fetch("/api/tag/all");case 6:if((a=e.sent).ok){e.next=10;break}return r=a.status,o=a.statusText,e.abrupt("return",j("".concat(r," error: ").concat(o,". Please try again later.")));case 10:return e.next=12,a.json();case 12:c=e.sent,s=c.success,i=c.data,s?(localStorage.setItem("tags",JSON.stringify(i)),l(i),n(!0)):(j("Error: ".concat(i,". Please try again later.")),n(!1));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){a||f()}));var m=null===s||void 0===s?void 0:s.map((function(e,t){var a=e.tag;return Object(p.jsx)(E,{tag:a},"Tag_".concat(t))}));return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("section",{className:I.a.foodTags,children:m})})}var N={name:"Name",gluten:"Gluten",glutenExplanation:"Gluten Explanation",fructose:"Fructose",fructoseExplanation:"Fructose Explanation",lactose:"Lactose",lactoseExplanation:"Lactose Explanation",price:"Price",baseHunger:"Base Hunger",baseHealth:"Base Health",breakfast:"Breakfast",lunch:"Lunch",dinner:"Dinner",tags:"Tags"},T={name:"",gluten:1,glutenExplanation:"",fructose:!1,fructoseExplanation:"",lactose:!1,lactoseExplanation:"",price:1,baseHunger:1,baseHealth:1,breakfast:!1,lunch:!1,dinner:!1,tags:[]},L=a(18),C=a.n(L);function D(){var e,t,a=O("addFoodFormFetched"),n=Object(d.a)(a,2)[1],o=O("addFoodFormDisabled"),c=Object(d.a)(o,2)[1],s=O("showAddFoodForm"),l=Object(d.a)(s,2)[1],b=O("addFoodFormError"),m=Object(d.a)(b,2)[1],v=O("addFoodFormSuccess"),g=Object(d.a)(v,2)[1],_=O("addFoodFormEditable"),y=Object(d.a)(_,1)[0],k=O("addFoodFormData"),E=Object(d.a)(k,2),w=E[0],I=E[1],L=O("addFoodFormSelectedFood"),D=Object(d.a)(L,2),P=D[0],A=D[1],B=Object(r.useCallback)((function(){I(T)}),[I]);Object(r.useEffect)((function(){y||B()}),[B,y]);Object(r.useEffect)((function(){!function(){for(var e=M.filter((function(e){return null!==e})),t=0;t<e.length;t+=1){var a=e[t].props,r=a.type,n=a.value;if("checkbox"!==r&&!n)return c(!0)}c(!1)}()}));var R=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r,o,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c(!0),y){e.next=8;break}return e.next=5,fetch("/api/food/one",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,fetch("/api/food/one/".concat(P),{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});case 10:a=e.sent;case 11:if(a.ok){e.next=14;break}return o=(r=a).status,s=r.statusText,e.abrupt("return",m("".concat(o," error: ").concat(s,". Please try again later.")));case 14:return e.next=16,a.json();case 16:if(!(i=e.sent).success){e.next=25;break}return B(),n(!1),l(!1),A(""),e.abrupt("return",g("Success: ".concat(i.data.name," was edited.")));case 25:return c(!1),e.abrupt("return",m("Error: ".concat(i.error,". Please try again later.")));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){var t=e.target.value;"checkbox"===e.target.type?t=e.target.checked:"number"===e.target.type&&(t=parseInt(e.target.value)),I(Object(f.a)(Object(f.a)({},w),{},Object(j.a)({},e.target.name,t)))},M=null===(e=Object.entries(w))||void 0===e||null===(t=e.filter((function(e){var t=Object(d.a)(e,1)[0];return!/_/.test(t)})))||void 0===t?void 0:t.map((function(e,t){var a=Object(d.a)(e,2),r=a[0],n=a[1],o="text";return"boolean"===typeof n?o="checkbox":"number"===typeof n&&(o="number"),("glutenExplanation"!==r||w.gluten)&&("fructoseExplanation"!==r||w.fructose)&&("lactoseExplanation"!==r||w.lactose)?Object(p.jsx)(F,{name:"Food Input ".concat(t),label:N[r],type:o,value:w[r],handleInputChange:J,disabled:"tags"===r},r):null}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:C.a.foodFormModalOverlay}),Object(p.jsx)("article",{className:C.a.foodFormModal,children:Object(p.jsxs)("div",{className:C.a.foodFormContainer,children:[Object(p.jsx)("h2",{children:y?"Edit a dish":"Add a dish"}),Object(p.jsxs)("form",{className:C.a.foodForm,onSubmit:R,children:[M,Object(p.jsx)(S,{}),Object(p.jsxs)("section",{className:C.a.foodButtons,children:[Object(p.jsx)(h,{}),Object(p.jsx)(x,{})]})]})]})})]})}var P=a(33),A=a.n(P);function B(){var e=O("addFoodFormError"),t=Object(d.a)(e,1)[0];return Object(p.jsx)("span",{className:A.a.foodError,children:t})}var R=a(34),J=a.n(R);function M(){var e=O("addFoodFormSuccess"),t=Object(d.a)(e,1)[0];return Object(p.jsx)("span",{className:J.a.foodSuccess,children:t})}var U=a(10),G=a.n(U);function H(){var e,t,a=null===(e=Object.values(N))||void 0===e||null===(t=e.filter((function(e){return!/Explanation/.test(e)})))||void 0===t?void 0:t.map((function(e,t){return Object(p.jsx)("span",{className:"".concat(G.a.foodListFields," ").concat(G.a.headers),children:e},"Header_".concat(t))}));return Object(p.jsx)("section",{className:G.a.foodListItem,children:a})}var z=a(35),W=a.n(z);function q(e){var t=e._id,a=O("addFoodFormError"),r=Object(d.a)(a,2)[1],n=O("addFoodFormData"),o=Object(d.a)(n,2)[1],c=O("addFoodFormEditable"),s=Object(d.a)(c,2)[1],l=O("showAddFoodForm"),b=Object(d.a)(l,2)[1],j=O("addFoodFormFetched"),f=Object(d.a)(j,2)[1],m=O("addFoodFormSuccess"),h=Object(d.a)(m,2)[1],x=O("addFoodFormSelectedFood"),v=Object(d.a)(x,2)[1],g=function(){var e=Object(i.a)(u.a.mark((function e(){var a,n,c,i,l,j,f,m,O,p,h,x,g;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/one/".concat(t));case 2:if((a=e.sent).ok){e.next=6;break}return n=a.status,c=a.statusText,e.abrupt("return",r("".concat(n," error: ").concat(c,". Please try again later.")));case 6:return e.next=8,a.json();case 8:if(i=e.sent,l=i.success,j=i.data,l){for(m=null===(f=Object.entries(j))||void 0===f?void 0:f.filter((function(e){var t=Object(d.a)(e,1)[0];return!/_/.test(t)})),O=Object.assign({},T),p=0;p<m.length;p+=1)h=Object(d.a)(m[p],2),x=h[0],g=h[1],O[x]=g;v(t),o(O),s(!0),b(!0)}else r("Error: ".concat(j,". Please try again later."));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(u.a.mark((function e(){var a,n,o,c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/one/".concat(t),{method:"DELETE"});case 2:if((a=e.sent).ok){e.next=6;break}return n=a.status,o=a.statusText,e.abrupt("return",r("".concat(n," error: ").concat(o,". Please try again later.")));case 6:return e.next=8,a.json();case 8:c=e.sent,s=c.success,i=c.data,s?(f(!1),h("Success: ".concat(i.name," was deleted."))):r("Error: ".concat(i,". Please try again later."));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("section",{className:W.a.foodItemOverlay,children:[Object(p.jsx)("button",{onClick:g,children:"Edit"}),Object(p.jsx)("button",{onClick:F,children:"Delete"})]})}function Q(e){var t,a,r=e.food,n=e.index,o=r._id,c=O("showAddFoodFormItemOverlay"),s=Object(d.a)(c,2),u=s[0],i=s[1],l=null===(t=Object.entries(r))||void 0===t||null===(a=t.filter((function(e){var t=Object(d.a)(e,1)[0];return!/Explanation|_/.test(t)})))||void 0===a?void 0:a.map((function(e,t){var a=Object(d.a)(e,2),r=(a[0],a[1]),n=r;return"string"===typeof r&&r.length>32&&(n=r.slice(0,29)+"..."),Object(p.jsx)("span",{className:"".concat(G.a.foodListFields," ").concat(!0===r&&G.a.green),children:"string"===typeof r?n:JSON.stringify(r)},"Value_".concat(t))}));return Object(p.jsxs)("article",{onClick:function(){return i(u===n?-1:n)},className:G.a.foodListItem,children:[l,u===n&&Object(p.jsx)(q,{_id:o})]})}function V(){var e=O("addFoodFormFoods"),t=Object(d.a)(e,1)[0],a=null===t||void 0===t?void 0:t.map((function(e,t){return Object(p.jsx)(Q,{food:e,index:t},"Item_".concat(t))}));return Object(p.jsx)("section",{className:G.a.foodListItems,children:a})}function X(){return Object(p.jsx)("span",{children:"Please wait, loading..."})}function Y(){var e=O("addFoodFormFoods"),t=Object(d.a)(e,2)[1],a=O("addFoodFormFetched"),n=Object(d.a)(a,2),o=n[0],c=n[1],s=O("addFoodFormError"),l=Object(d.a)(s,2),b=l[0],j=l[1],f=O("addFoodFormSuccess"),m=Object(d.a)(f,2),h=m[0],x=m[1],v=function(){var e=Object(i.a)(u.a.mark((function e(){var a,r,n,o,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/all");case 2:if((a=e.sent).ok){e.next=6;break}return r=a.status,n=a.statusText,e.abrupt("return",j("".concat(r," error: ").concat(n,". Please try again later.")));case 6:return e.next=8,a.json();case 8:o=e.sent,s=o.success,i=o.data,s?(t(i),c(!0)):(j("Error: ".concat(i,". Please try again later.")),c(!1));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o||v()})),Object(r.useEffect)((function(){h&&setTimeout((function(){return x("")}),3e3),b&&setTimeout((function(){return j("")}),5e3)})),Object(p.jsxs)("article",{className:G.a.foodList,children:[Object(p.jsx)("h2",{children:"Submitted Dishes"}),Object(p.jsx)(H,{}),o?Object(p.jsx)(V,{}):Object(p.jsx)(X,{}),b&&Object(p.jsx)(B,{}),h&&Object(p.jsx)(M,{})]})}var Z=a(36),K=a.n(Z);function $(){var e=O("showAddFoodForm"),t=Object(d.a)(e,2),a=t[0],r=t[1],n=O("addFoodFormEditable"),o=Object(d.a)(n,2)[1],c=O("showAddFoodFormItemOverlay"),s=Object(d.a)(c,2)[1];return Object(p.jsx)("button",{className:K.a.showFoodFormButton,onClick:function(){o(!1),r(!0),s(-1)},disabled:a,children:"Add a dish"})}var ee=function(){var e=O("showAddFoodForm"),t=Object(d.a)(e,1)[0];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Y,{}),!t&&Object(p.jsx)($,{}),t&&Object(p.jsx)(D,{})]})};function te(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"My Celiac Adventure"}),Object(p.jsx)("h3",{children:"Welcome!"})]})}function ae(){var e=O("currentUser"),t=Object(d.a)(e,1)[0];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"My Celiac Adventure"}),Object(p.jsxs)("h3",{children:["Welcome ",t.username,"!"]})]})}function re(){var e=O("loggedIn"),t=Object(d.a)(e,1)[0];return Object(p.jsx)(p.Fragment,{children:t?Object(p.jsx)(ae,{}):Object(p.jsx)(te,{})})}function ne(){var e=Object(b.h)().pathname;return Object(p.jsx)(p.Fragment,{children:/login/.test(e)?Object(p.jsx)(l.b,{to:"/register",children:"Register Instead"}):Object(p.jsx)(l.b,{to:"/login",children:"Login Instead"})})}var oe=a(21),ce=a.n(oe);function se(e){var t=e.label,a=e.name,r=e.type,n=e.value,o=e.handleInputChange,c=O("userFormInputDisabled"),s=Object(d.a)(c,1)[0];return Object(p.jsxs)("label",{className:ce.a.baseInputRow,children:[Object(p.jsx)("span",{className:"".concat(ce.a.baseLabel," ").concat(ce.a.above),children:t}),Object(p.jsx)("input",{className:ce.a.baseInput,name:a,type:r,value:n,placeholder:"".concat(t," cannot be ").concat("number"===r?"zero":"blank"),onChange:o,disabled:s})]})}function ue(){var e=Object(b.h)().pathname,t=O("userFormDisabled"),a=Object(d.a)(t,1)[0];return Object(p.jsx)("input",{type:"submit",value:/login/.test(e)?"Login":"Register",disabled:a})}var ie={username:"Username",email:"Email",password:"Password"},de={username:"",password:""},le={username:"",email:"",password:""},be=a(13),je=a.n(be);function fe(e){var t,a=e.handleFormSubmit,n=O("userFormDisabled"),o=Object(d.a)(n,2)[1],c=O("userFormData"),s=Object(d.a)(c,2),u=s[0],i=s[1];Object(r.useEffect)((function(){!function(){for(var e=b.filter((function(e){return null!==e})),t=0;t<e.length;t+=1){var a=e[t].props,r=a.type,n=a.value;if("checkbox"!==r&&!n)return o(!0)}o(!1)}()}));var l=function(e){var t=e.target.value;"checkbox"===e.target.type?t=e.target.checked:"number"===e.target.type&&(t=parseInt(e.target.value)),i(Object(f.a)(Object(f.a)({},u),{},Object(j.a)({},e.target.name,t)))},b=null===(t=Object.entries(u))||void 0===t?void 0:t.map((function(e,t){var a=Object(d.a)(e,1)[0],r="text";return"email"!==a&&"password"!==a||(r=a),Object(p.jsx)(se,{name:a,label:ie[a],type:r,value:u[a],handleInputChange:l},"Base Input ".concat(t))}));return Object(p.jsxs)("form",{className:je.a.baseForm,onSubmit:a,children:[b,Object(p.jsxs)("section",{className:je.a.baseButtons,children:[Object(p.jsx)(ue,{}),Object(p.jsx)(ne,{})]})]})}var me=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/auth",{method:"GET",credentials:"include"});case 3:if((t=e.sent).ok){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,t.json();case 8:if((a=e.sent).success){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",a);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/auth-admin",{method:"GET",credentials:"include"});case 3:if((t=e.sent).ok){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,t.json();case 8:if((a=e.sent).success){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",a);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();function pe(e){var t,a,n=e.adminRequired,o=O("userFormData"),c=Object(d.a)(o,2),s=c[0],l=c[1],j=O("userFormError"),f=Object(d.a)(j,2),m=f[0],h=f[1],x=O("userFormSuccess"),v=Object(d.a)(x,2),g=v[0],F=v[1],_=O("userFormDisabled"),y=Object(d.a)(_,2)[1],k=O("userFormInputDisabled"),E=Object(d.a)(k,2)[1],w=O("loggedIn"),I=Object(d.a)(w,2),S=I[0],N=I[1],T=O("currentUser"),L=Object(d.a)(T,2)[1],C=O("isAdmin"),D=Object(d.a)(C,2)[1],P=Object(b.g)(),A=Object(b.h)(),B=Object(r.useState)(!1),R=Object(d.a)(B,2),J=R[0],M=R[1],U=Object(r.useCallback)((function(){l(de),y(!1),E(!1),h(""),F("")}),[l,y,E,h,F]);Object(r.useEffect)((function(){g&&setTimeout((function(){return F("")}),3e3),m&&setTimeout((function(){return h("")}),5e3)})),Object(r.useEffect)((function(){J||(U(),M(!0))}),[M,J,U]);var G=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),y(!0),E(!0),e.next=5,fetch("/api/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 5:if(401!==(a=e.sent).status){e.next=9;break}return U(),e.abrupt("return",h("Username or password is invalid."));case 9:if(a.ok){e.next=13;break}return r=a.status,o=a.statusText,U(),e.abrupt("return",h("".concat(r," error: ").concat(o,". Please try again later.")));case 13:return e.next=15,a.json();case 15:if((c=e.sent).success){e.next=19;break}return U(),e.abrupt("return",h("Error: ".concat(c.error,". Please try again later.")));case 19:if(!n){e.next=29;break}return e.next=22,Oe();case 22:if(e.sent){e.next=28;break}return D(!1),N(!1),U(),e.abrupt("return",h("Error: you are not an administrator."));case 28:D(!0);case 29:return N(!0),L(c.data),U(),F("Success: logged in. Automatically redirecting."),e.abrupt("return",setTimeout((function(){var e,t;return P.push((null===A||void 0===A||null===(e=A.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/")}),1e3));case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return S?Object(p.jsx)(b.a,{to:(null===A||void 0===A||null===(t=A.state)||void 0===t||null===(a=t.from)||void 0===a?void 0:a.pathname)||"/"}):Object(p.jsxs)(p.Fragment,{children:[J&&Object(p.jsx)(fe,{formType:"login",handleFormSubmit:G}),g&&Object(p.jsx)("span",{className:je.a.success,children:g}),m&&Object(p.jsx)("span",{className:je.a.error,children:m})]})}function he(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Login"}),Object(p.jsx)("h3",{children:"Please login to view this page."}),Object(p.jsx)(pe,{})]})}function xe(){var e=O("userFormData"),t=Object(d.a)(e,2),a=t[0],n=t[1],o=O("userFormError"),c=Object(d.a)(o,2),s=c[0],l=c[1],j=O("userFormSuccess"),f=Object(d.a)(j,2),m=f[0],h=f[1],x=O("userFormDisabled"),v=Object(d.a)(x,2)[1],g=O("userFormInputDisabled"),F=Object(d.a)(g,2)[1],_=O("loggedIn"),y=Object(d.a)(_,2)[1],k=O("currentUser"),E=Object(d.a)(k,2)[1],w=Object(b.g)(),I=Object(b.h)(),S=Object(r.useState)(!1),N=Object(d.a)(S,2),T=N[0],L=N[1],C=Object(r.useCallback)((function(){n(le),v(!1),F(!1),l(""),h("")}),[n,v,F,l,h]);Object(r.useEffect)((function(){m&&setTimeout((function(){return h("")}),3e3),s&&setTimeout((function(){return l("")}),5e3)})),Object(r.useEffect)((function(){T||(C(),L(!0))}),[L,T,C]);var D=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,n,o,c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),v(!0),F(!0),e.next=5,fetch("/api/register",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:if(201!==!(o=e.sent).status){e.next=10;break}return c=o.status,s=o.message,C(),e.abrupt("return",l("".concat(c," error: ").concat(s,".")));case 10:return e.next=12,o.json();case 12:if((i=e.sent).success){e.next=16;break}return C(),e.abrupt("return",l("Error: ".concat(i.error,". Please try again later.")));case 16:return y(!0),E(i.data),C(),h("Successfully registered user ".concat(i.data.username)),e.abrupt("return",w.push((null===I||void 0===I||null===(r=I.state)||void 0===r||null===(n=r.from)||void 0===n?void 0:n.pathname)||"/"));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[T&&Object(p.jsx)(fe,{formType:"register",handleFormSubmit:D}),m&&Object(p.jsx)("span",{className:je.a.success,children:m}),s&&Object(p.jsx)("span",{className:je.a.error,children:s})]})}function ve(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Register"}),Object(p.jsx)("h3",{children:"Create a new account to get started."}),Object(p.jsx)(xe,{})]})}var ge=a(16);function Fe(e){var t=e.location,a=Object(ge.a)(e,["location"]),r=O("loggedIn"),n=Object(d.a)(r,1)[0],o=O("isAdmin"),c=Object(d.a)(o,1)[0];return Object(p.jsx)(p.Fragment,{children:n&&c?Object(p.jsx)(b.b,Object(f.a)({},a)):Object(p.jsx)(b.a,{to:{pathname:"/admin-login",state:{from:t}}})})}function _e(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Admin Login"}),Object(p.jsx)("h3",{children:"You must be an administrator to view this page."}),Object(p.jsx)(pe,{adminRequired:!0})]})}function ye(e){var t=e.location,a=Object(ge.a)(e,["location"]),r=O("loggedIn"),n=Object(d.a)(r,1)[0];return Object(p.jsx)(p.Fragment,{children:n?Object(p.jsx)(b.a,{to:{pathname:"/",state:{from:t}}}):Object(p.jsx)(b.b,Object(f.a)({},a))})}function ke(e){var t=e.location,a=Object(ge.a)(e,["location"]),r=O("loggedIn"),n=Object(d.a)(r,1)[0];return Object(p.jsx)(p.Fragment,{children:n?Object(p.jsx)(b.b,Object(f.a)({},a)):Object(p.jsx)(b.a,{to:{pathname:"/login",state:{from:t}}})})}function Ee(){var e=O("currentUser"),t=Object(d.a)(e,1)[0],a=t.username,r=t.email;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("article",{children:[Object(p.jsx)("p",{children:a}),Object(p.jsx)("p",{children:r})]})})}function we(){return Object(p.jsx)(Ee,{})}function Ie(){var e=O("loggedIn"),t=Object(d.a)(e,2),a=t[0],r=t[1],n=O("currentUser"),o=Object(d.a)(n,2),c=o[0],s=o[1],l=Object(b.g)(),j=function(){var e=Object(i.a)(u.a.mark((function e(){var t,n,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/api/logout",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 4:if((t=e.sent).ok){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,t.json();case 9:if(n=e.sent){e.next=12;break}return e.abrupt("return");case 12:if(o=n.success,i=n.message,o){e.next=16;break}return console.log(i),e.abrupt("return");case 16:return s({}),r(!1),e.abrupt("return",l.push("/"));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("button",{onClick:j,children:"Logout"})}var Se=a(28),Ne=a.n(Se);function Te(){var e=O("loggedIn");return Object(d.a)(e,1)[0]?Object(p.jsxs)("nav",{className:Ne.a.nav,children:[Object(p.jsx)(l.b,{to:"/",children:"Play"}),Object(p.jsx)(l.b,{to:"/profile",children:"Profile"}),Object(p.jsx)(Ie,{})]}):Object(p.jsxs)("nav",{className:Ne.a.nav,children:[Object(p.jsx)(l.b,{to:"/",children:"Play"}),Object(p.jsx)(l.b,{to:"/register",children:"Register"}),Object(p.jsx)(l.b,{to:"/login",children:"Login"})]})}var Le=a(38),Ce=a.n(Le);function De(){var e=O("loggedIn"),t=Object(d.a)(e,2),a=t[0],n=t[1],o=O("isAdmin"),c=Object(d.a)(o,2)[1],s=O("currentUser"),j=Object(d.a)(s,2)[1],f=Object(r.useState)(!1),m=Object(d.a)(f,2),h=m[0],x=m[1];return Object(r.useEffect)((function(){(function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me();case 2:return(t=e.sent).success&&(n(!0),j(t.data)),e.next=6,Oe();case 6:e.sent.success&&c(!0),x(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,n,j,c]),Object(p.jsx)("div",{className:Ce.a.app,children:h&&Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(l.a,{children:[Object(p.jsx)(Te,{}),Object(p.jsxs)(b.d,{children:[Object(p.jsx)(Fe,{path:"/add-food",component:ee}),Object(p.jsx)(b.b,{path:"/admin-login",component:_e}),Object(p.jsx)(ye,{path:"/login",component:he}),Object(p.jsx)(ye,{path:"/register",component:ve}),Object(p.jsx)(ke,{path:"/profile",component:we}),Object(p.jsx)(b.b,{path:"/",component:re})]})]})})})}var Pe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,53)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),o(e),c(e)}))};c.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(De,{})}),document.getElementById("root")),Pe()}],[[52,1,2]]]);
//# sourceMappingURL=main.b17f0a7b.chunk.js.map