(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports={foodList:"food-list_foodList__1reRd",foodListItems:"food-list_foodListItems__Vom0L",foodListItem:"food-list_foodListItem__2AAim",foodListFields:"food-list_foodListFields__1drop",headers:"food-list_headers__1zgGb",green:"food-list_green__3Ei-_"}},,,,,function(e,t,a){e.exports={foodRow:"food-input_foodRow__3FaJC",foodLabel:"food-input_foodLabel__36i1a",short:"food-input_short__DWUPW",above:"food-input_above__3tFye",foodInput:"food-input_foodInput__3PEmn"}},function(e,t,a){e.exports={foodFormModal:"food-form_foodFormModal__1i0xW",foodFormModalOverlay:"food-form_foodFormModalOverlay__1g29t",foodFormContainer:"food-form_foodFormContainer__3VGNq",foodForm:"food-form_foodForm__2gEtH",foodButtons:"food-form_foodButtons__2Aahn"}},,,,,,function(e,t,a){e.exports={foodTag:"food-tag_foodTag__2pFO_",used:"food-tag_used__1-LlO"}},,,,,,function(e,t,a){e.exports={foodTags:"food-tags_foodTags__38xGE"}},function(e,t,a){e.exports={foodError:"food-error_foodError__2Xmmv"}},function(e,t,a){e.exports={foodSuccess:"food-success_foodSuccess__3NQQX"}},function(e,t,a){e.exports={foodItemOverlay:"food-item-overlay_foodItemOverlay__20Ma9"}},function(e,t,a){e.exports={showFoodFormButton:"show-food-form-button_showFoodFormButton__1oBC3"}},function(e,t,a){e.exports={addFoodContainer:"add-food_addFoodContainer__uymAp"}},function(e,t,a){},function(e,t,a){},,,,,,,,function(e,t,a){},,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(25),c=a.n(r),s=(a(42),a(35)),i=a(3),u=a(2),f=a(13),d=a(5),l=a(6),b=a.n(l),j=a(11),O=a(26),m=Object(O.a)({showForm:!1,fetched:!1,formDisabled:!1,formEditable:!1,showFormItemOverlay:-1,error:"",success:"",foods:[],food:"",formData:{}}).useGlobalState,p=a(0);function h(){var e=m("formDisabled"),t=Object(u.a)(e,1)[0];return Object(p.jsx)("input",{type:"submit",value:"Submit",disabled:t})}function x(){var e=m("food"),t=Object(u.a)(e,2)[1],a=m("showForm"),n=Object(u.a)(a,2)[1],o=m("formDisabled"),r=Object(u.a)(o,2)[1];return Object(p.jsx)("button",{onClick:function(){t(""),n(!1),r(!0)},children:"Cancel"})}var v=a(14),g=a.n(v);function _(e){var t=e.name,a=e.label,n=e.type,o=e.value,r=e.handleInputChange,c=e.disabled;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("label",{className:"".concat(g.a.foodRow," ").concat("checkbox"===n&&g.a.short),children:[Object(p.jsx)("span",{className:"".concat(g.a.foodLabel," ").concat(("text"===n||"number"===n)&&g.a.above),children:a}),Object(p.jsx)("input",{className:"".concat(g.a.foodInput),name:t,type:n,value:o,checked:o,onChange:r,placeholder:"".concat(a," cannot be ").concat("number"===n?"zero":"blank"),disabled:c})]})})}var y=a(37),F=a(21),E=a.n(F);function k(e){var t=e.tag,a=Object(n.useState)(!1),o=Object(u.a)(a,2),r=o[0],c=o[1],s=m("formData"),i=Object(u.a)(s,2),f=i[0],l=i[1],b=m("formEditable"),j=Object(u.a)(b,1)[0];Object(n.useEffect)((function(){if(j)for(var e=0;e<f.tags.length;e+=1)f.tags[e]===t&&c(!0)}),[f,j,t,c]);return Object(p.jsx)("span",{className:"".concat(E.a.foodTag," ").concat(r&&E.a.used),onClick:function(){var e=Object(y.a)(f.tags);r?(e=e.filter((function(e){return e!==t})),c(!1)):(e.push(t),c(!0)),l(Object(d.a)(Object(d.a)({},f),{},{tags:e}))},children:t})}var w=a(27),N=a.n(w);function C(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)([]),c=Object(u.a)(r,2),s=c[0],i=c[1],f=m("error"),d=Object(u.a)(f,1)[0],l=function(){var e=Object(j.a)(b.a.mark((function e(){var t,a,n,r,c,s,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("tags")){e.next=4;break}return t=JSON.parse(localStorage.getItem("tags")),i(t),e.abrupt("return",o(!0));case 4:return e.next=6,fetch("/api/tag/all");case 6:if((a=e.sent).ok){e.next=10;break}return n=a.status,r=a.statusText,e.abrupt("return",d("".concat(n," error: ").concat(r,". Please try again later.")));case 10:return e.next=12,a.json();case 12:c=e.sent,s=c.success,u=c.data,s?(localStorage.setItem("tags",JSON.stringify(u)),i(u),o(!0)):(d("Error: ".concat(u,". Please try again later.")),o(!1));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){a||l()}));var O=null===s||void 0===s?void 0:s.map((function(e,t){var a=e.tag;return Object(p.jsx)(k,{tag:a},"Tag_".concat(t))}));return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("section",{className:N.a.foodTags,children:O})})}var I={name:"Name",gluten:"Gluten",glutenExplanation:"Gluten Explanation",fructose:"Fructose",fructoseExplanation:"Fructose Explanation",lactose:"Lactose",lactoseExplanation:"Lactose Explanation",price:"Price",baseHunger:"Base Hunger",baseHealth:"Base Health",breakfast:"Breakfast",lunch:"Lunch",dinner:"Dinner",tags:"Tags"},L={name:"",gluten:1,glutenExplanation:"",fructose:!1,fructoseExplanation:"",lactose:!1,lactoseExplanation:"",price:1,baseHunger:1,baseHealth:1,breakfast:!1,lunch:!1,dinner:!1,tags:[]},S=a(15),T=a.n(S);function P(){var e,t,a=m("fetched"),o=Object(u.a)(a,2)[1],r=m("formDisabled"),c=Object(u.a)(r,2)[1],s=m("showForm"),i=Object(u.a)(s,2)[1],l=m("food"),O=Object(u.a)(l,2)[1],v=m("error"),g=Object(u.a)(v,2)[1],y=m("success"),F=Object(u.a)(y,2)[1],E=m("food"),k=Object(u.a)(E,1)[0],w=m("formEditable"),N=Object(u.a)(w,1)[0],S=m("formData"),P=Object(u.a)(S,2),D=P[0],B=P[1],M=Object(n.useCallback)((function(){B(L)}),[B]);Object(n.useEffect)((function(){N||M()}),[M,N]);Object(n.useEffect)((function(){!function(){for(var e=A.filter((function(e){return null!==e})),t=0;t<e.length;t+=1){var a=e[t].props,n=a.type,o=a.value;if("checkbox"!==n&&!o)return c(!0)}c(!1)}()}));var H=function(){var e=Object(j.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c(!0),N){e.next=8;break}return e.next=5,fetch("/api/food/one",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,fetch("/api/food/one/".concat(k),{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});case 10:a=e.sent;case 11:return e.next=13,a.json();case 13:if(!(n=e.sent).success){e.next=22;break}return M(),o(!1),i(!1),O(""),e.abrupt("return",F("Success: ".concat(n.data.name," was edited.")));case 22:return c(!1),e.abrupt("return",g("Error: ".concat(n.error,". Please try again later.")));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){var t=e.target.value;"checkbox"===e.target.type?t=e.target.checked:"number"===e.target.type&&(t=parseInt(e.target.value)),B(Object(d.a)(Object(d.a)({},D),{},Object(f.a)({},e.target.name,t)))},A=null===(e=Object.entries(D))||void 0===e||null===(t=e.filter((function(e){var t=Object(u.a)(e,1)[0];return!/_/.test(t)})))||void 0===t?void 0:t.map((function(e){var t=Object(u.a)(e,2),a=t[0],n=t[1],o="text";return"boolean"===typeof n?o="checkbox":"number"===typeof n&&(o="number"),("glutenExplanation"!==a||D.gluten)&&("fructoseExplanation"!==a||D.fructose)&&("lactoseExplanation"!==a||D.lactose)?Object(p.jsx)(_,{name:a,label:I[a],type:o,value:D[a],handleInputChange:J,disabled:"tags"===a},a):null}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:T.a.foodFormModalOverlay}),Object(p.jsx)("article",{className:T.a.foodFormModal,children:Object(p.jsxs)("div",{className:T.a.foodFormContainer,children:[Object(p.jsx)("h2",{children:N?"Edit a dish":"Add a dish"}),Object(p.jsxs)("form",{className:T.a.foodForm,onSubmit:H,children:[A,Object(p.jsx)(C,{}),Object(p.jsxs)("section",{className:T.a.foodButtons,children:[Object(p.jsx)(h,{}),Object(p.jsx)(x,{})]})]})]})})]})}var D=a(28),B=a.n(D);function M(){var e=m("error"),t=Object(u.a)(e,1)[0];return Object(p.jsx)("span",{className:B.a.foodError,children:t})}var H=a(29),J=a.n(H);function A(){var e=m("success"),t=Object(u.a)(e,1)[0];return Object(p.jsx)("span",{className:J.a.foodSuccess,children:t})}var G=a(9),R=a.n(G);function V(){var e,t,a=null===(e=Object.values(I))||void 0===e||null===(t=e.filter((function(e){return!/Explanation/.test(e)})))||void 0===t?void 0:t.map((function(e,t){return Object(p.jsx)("span",{className:"".concat(R.a.foodListFields," ").concat(R.a.headers),children:e},"Header_".concat(t))}));return Object(p.jsx)("section",{className:R.a.foodListItem,children:a})}var W=a(30),z=a.n(W);function Q(e){var t=e._id,a=m("error"),n=Object(u.a)(a,2)[1],o=m("formData"),r=Object(u.a)(o,2)[1],c=m("formEditable"),s=Object(u.a)(c,2)[1],i=m("showForm"),f=Object(u.a)(i,2)[1],d=m("fetched"),l=Object(u.a)(d,2)[1],O=m("success"),h=Object(u.a)(O,2)[1],x=m("food"),v=Object(u.a)(x,2)[1],g=function(){var e=Object(j.a)(b.a.mark((function e(){var a,o,c,i,d,l,j,O,m,p,h,x,g;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/one/".concat(t));case 2:if((a=e.sent).ok){e.next=6;break}return o=a.status,c=a.statusText,e.abrupt("return",n("".concat(o," error: ").concat(c,". Please try again later.")));case 6:return e.next=8,a.json();case 8:if(i=e.sent,d=i.success,l=i.data,d){for(O=null===(j=Object.entries(l))||void 0===j?void 0:j.filter((function(e){var t=Object(u.a)(e,1)[0];return!/_/.test(t)})),m=Object.assign({},L),p=0;p<O.length;p+=1)h=Object(u.a)(O[p],2),x=h[0],g=h[1],m[x]=g;v(t),r(m),s(!0),f(!0)}else n("Error: ".concat(l,". Please try again later."));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(j.a)(b.a.mark((function e(){var a,o,r,c,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/one/".concat(t),{method:"DELETE"});case 2:if((a=e.sent).ok){e.next=6;break}return o=a.status,r=a.statusText,e.abrupt("return",n("".concat(o," error: ").concat(r,". Please try again later.")));case 6:return e.next=8,a.json();case 8:c=e.sent,s=c.success,i=c.data,s?(l(!1),h("Success: ".concat(i.name," was deleted."))):n("Error: ".concat(i,". Please try again later."));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("section",{className:z.a.foodItemOverlay,children:[Object(p.jsx)("button",{onClick:g,children:"Edit"}),Object(p.jsx)("button",{onClick:_,children:"Delete"})]})}function U(e){var t,a,n=e.food,o=e.index,r=n._id,c=m("showFormItemOverlay"),s=Object(u.a)(c,2),i=s[0],f=s[1],d=null===(t=Object.entries(n))||void 0===t||null===(a=t.filter((function(e){var t=Object(u.a)(e,1)[0];return!/Explanation|_/.test(t)})))||void 0===a?void 0:a.map((function(e,t){var a=Object(u.a)(e,2),n=(a[0],a[1]),o=n;return"string"===typeof n&&n.length>32&&(o=n.slice(0,29)+"..."),Object(p.jsx)("span",{className:"".concat(R.a.foodListFields," ").concat(!0===n&&R.a.green),children:"string"===typeof n?o:JSON.stringify(n)},"Value_".concat(t))}));return Object(p.jsxs)("article",{onClick:function(){return f(i===o?-1:o)},className:R.a.foodListItem,children:[d,i===o&&Object(p.jsx)(Q,{_id:r})]})}function X(){var e=m("foods"),t=Object(u.a)(e,1)[0],a=null===t||void 0===t?void 0:t.map((function(e,t){return Object(p.jsx)(U,{food:e,index:t},"Item_".concat(t))}));return Object(p.jsx)("section",{className:R.a.foodListItems,children:a})}function q(){return Object(p.jsx)("span",{children:"Please wait, loading..."})}function K(){var e=m("foods"),t=Object(u.a)(e,2)[1],a=m("fetched"),o=Object(u.a)(a,2),r=o[0],c=o[1],s=m("error"),i=Object(u.a)(s,2),f=i[0],d=i[1],l=m("success"),O=Object(u.a)(l,2),h=O[0],x=O[1],v=function(){var e=Object(j.a)(b.a.mark((function e(){var a,n,o,r,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/food/all");case 2:if((a=e.sent).ok){e.next=6;break}return n=a.status,o=a.statusText,e.abrupt("return",d("".concat(n," error: ").concat(o,". Please try again later.")));case 6:return e.next=8,a.json();case 8:r=e.sent,s=r.success,i=r.data,s?(t(i),c(!0)):(d("Error: ".concat(i,". Please try again later.")),c(!1));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){r||v()})),Object(n.useEffect)((function(){h&&setTimeout((function(){return x("")}),3e3),f&&setTimeout((function(){return d("")}),5e3)})),Object(p.jsxs)("article",{className:R.a.foodList,children:[Object(p.jsx)("h2",{children:"Submitted Dishes"}),Object(p.jsx)(V,{}),r?Object(p.jsx)(X,{}):Object(p.jsx)(q,{}),f&&Object(p.jsx)(M,{}),h&&Object(p.jsx)(A,{})]})}var Y=a(31),Z=a.n(Y);function $(){var e=m("showForm"),t=Object(u.a)(e,2),a=t[0],n=t[1],o=m("formEditable"),r=Object(u.a)(o,2)[1],c=m("showFormItemOverlay"),s=Object(u.a)(c,2)[1];return Object(p.jsx)("button",{className:Z.a.showFoodFormButton,onClick:function(){r(!1),n(!0),s(-1)},disabled:a,children:"Add a dish"})}var ee=a(32),te=a.n(ee),ae=function(){var e=m("showForm"),t=Object(u.a)(e,1)[0];return Object(p.jsxs)("article",{className:te.a.addFoodContainer,children:[Object(p.jsx)(K,{}),!t&&Object(p.jsx)($,{}),t&&Object(p.jsx)(P,{})]})},ne=a(33),oe=a.n(ne);function re(){return Object(p.jsx)("article",{className:oe.a.game,children:Object(p.jsx)("h2",{children:"My Celiac Adventure"})})}var ce=a(34),se=a.n(ce);function ie(){return Object(p.jsx)("div",{className:se.a.app,children:Object(p.jsx)(s.a,{children:Object(p.jsxs)(i.c,{children:[Object(p.jsx)(i.a,{path:"/add-food",component:ae}),Object(p.jsx)(i.a,{path:"/",component:re})]})})})}var ue=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,51)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),o(e),r(e),c(e)}))};c.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(ie,{})}),document.getElementById("root")),ue()}],[[50,1,2]]]);
//# sourceMappingURL=main.649fdc26.chunk.js.map